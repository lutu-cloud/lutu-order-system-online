:root {
    /* === Tool-First Minimalist (工具型極簡) === */
    --bg-primary: #fafafa;
    /* 統一淺灰背景 */
    --surface: #ffffff;
    /* 純白卡片 */

    /* 文字顏色 - 統一中性灰 */
    --text-primary: #545454;
    /* 深灰文字 */
    --text-secondary: #737373;
    /* 次要文字 */

    /* 互動元素 - 單一強調色 */
    --accent: #3b82f6;
    /* 中性藍 (唯一強調色) */
    --accent-hover: #2563eb;
    /* 懸停加深 */

    /* 系列識別色 - 精確匹配用戶圖片色號 */
    --accent-20: #E3F2FD;
    --accent-30: #FFF3E0;
    --accent-40: #E8F5E9;

    /* 系列背景色 - 上白下彩漸層終點 */
    --bg-20: #E3F2FD;
    --bg-30: #FFF3E0;
    --bg-40: #E8F5E9;

    /* 邊框與陰影 - 專業層次感 */
    --border: #e5e5e5;
    /* 統一邊框色 */
    --shadow-base: 0 2px 8px rgba(0, 0, 0, 0.08);
    /* 基礎浮起 */
    --shadow-hover: 0 8px 24px rgba(0, 0, 0, 0.12);
    /* 懸停強化 */
    --shadow-active: 0 0 0 4px rgba(59, 130, 246, 0.15);
    /* 選中發光 */

    /* 舊變數兼容 */
    --primary: #fafafa;
    --white: #ffffff;
    --bg-secondary: #f5f5f5;
    --text-dark: #0a0a0a;
    --shadow-sm: var(--shadow-base);
    --shadow-md: var(--shadow-base);
    --shadow-lg: var(--shadow-hover);
    --shadow-xl: var(--shadow-hover);
}

/* =========================================
   B2B Global Search (Tech AI Style)
   ========================================= */

.b2b-search-box {
    position: relative;
    width: 250px;
    /* Reduced slightly for more breathing room */
    transition: none;
    /* Instant for stability */
}

.b2b-search-box input {
    width: 100%;
    padding: 10px 16px 10px 38px;
    font-size: 0.95rem;
    color: #2c3e50;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-radius: 24px;
    outline: none;
    transition: all 0.3s ease;
    box-shadow:
        0 2px 5px rgba(0, 0, 0, 0.05),
        inset 0 1px 2px rgba(255, 255, 255, 0.8);
    font-family: 'Noto Sans TC', sans-serif;
    letter-spacing: 0.5px;
    box-sizing: border-box !important;
}

/* Icon Style */
.b2b-search-box i.fa-search {
    position: absolute;
    left: 14px;
    top: 50%;
    transform: translateY(-50%);
    color: #adb5bd;
    font-size: 0.9rem;
    transition: all 0.3s ease;
    z-index: 2;
}

/* Focus State - The "AI Glow" */
.b2b-search-box input:focus {
    background: #ffffff;
    width: 100%;
    /* Stay within container */
    border-color: rgba(59, 130, 246, 0.5);
    box-shadow:
        0 4px 20px rgba(59, 130, 246, 0.15),
        0 0 0 4px rgba(59, 130, 246, 0.05);
}

.b2b-search-box input:focus+i.fa-search {
    color: #3b82f6;
    /* Blue Icon on focus */
}

/* Placeholder Style */
.b2b-search-box input::placeholder {
    color: #adb5bd;
    font-weight: 400;
}

/* Hover Effect */
.b2b-search-box:hover input {
    border-color: rgba(0, 0, 0, 0.2);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

/* B2B Header Action Group (Desktop) */
.b2b-action-group {
    display: flex !important;
    gap: 12px !important;
    align-items: center !important;
    margin-left: auto !important;
}

.btn-query {
    background: #545454 !important;
    color: white !important;
    border: none !important;
    padding: 10px 18px !important;
    border-radius: 6px !important;
    cursor: pointer !important;
    font-weight: bold !important;
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2) !important;
    transition: all 0.2s !important;
}

.btn-query:hover {
    background: #3d3d3d !important;
    transform: translateY(-1px) !important;
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
    .b2b-search-box {
        width: 100%;
        /* Full width on mobile */
        order: -1;
        /* Move to top if in flex container */
        margin-bottom: 10px;
    }

    .b2b-search-box input:focus {
        width: 100%;
        /* Don't expand beyond container on mobile */
    }
}

html {
    font-size: 16px;
    /* Increased base size for better readability */
}

body {
    font-family: "Noto Sans TC", sans-serif;
    margin: 0;
    background: linear-gradient(180deg, #fafafa 0%, #f5f5f5 100%);
    background-attachment: fixed;
    color: var(--text-primary);
    overflow-x: hidden;
}

.app-container {
    display: flex;
    height: 100vh;
}

/* 深色專業側邊欄 */
.sidebar {
    width: 240px;
    background: #545454;
    border-right: 1px solid rgba(255, 255, 255, 0.1);
    padding: 24px 16px;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow-y: auto;
    overflow-x: hidden;
    box-shadow: 4px 0 24px rgba(0, 0, 0, 0.15);
}

/* Custom Scrollbar for Sidebar */
.sidebar::-webkit-scrollbar {
    width: 6px;
}

.sidebar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
}

.sidebar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
}

.brand {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 32px;
    color: white;
    letter-spacing: 1px;
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.nav-item {
    width: 100%;
    padding: 12px 14px;
    margin-bottom: 4px;
    border: none;
    background: transparent;
    text-align: left;
    cursor: pointer;
    font-size: 0.95rem;
    font-weight: 500;
    border-radius: 8px;
    transition: all 0.2s ease;
    color: rgba(255, 255, 255, 0.7);
    position: relative;
}

.nav-item:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    transform: translateX(2px);
}

.nav-item.active {
    background: rgba(59, 130, 246, 0.15) !important;
    color: #60a5fa !important;
    font-weight: 600;
    box-shadow: inset 0 0 0 1px rgba(96, 165, 250, 0.3);
    border-left: 3px solid #60a5fa;
}

/* Series-specific colors for navigation */
.series-20 .nav-item.active:nth-child(1) {
    background: var(--bg-20) !important;
    color: #1e3a8a !important;
    border-left-color: var(--accent-20);
    box-shadow: inset 0 0 0 1px rgba(189, 224, 245, 0.5);
}

.series-30 .nav-item.active:nth-child(2) {
    background: var(--bg-30) !important;
    color: #7c2d12 !important;
    border-left-color: var(--accent-30);
    box-shadow: inset 0 0 0 1px rgba(245, 194, 165, 0.5);
}

.series-40 .nav-item.active:nth-child(3) {
    background: var(--bg-40) !important;
    color: #14532d !important;
    border-left-color: var(--accent-40);
    box-shadow: inset 0 0 0 1px rgba(183, 224, 161, 0.5);
}

.project-tab.active {
    background: var(--white) !important;
    color: var(--primary) !important;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.separator {
    height: 1px;
    background: rgba(255, 255, 255, 0.1);
    margin: 10px 0;
}

.social-links {
    margin-top: auto;
    display: flex;
    justify-content: center;
    gap: 15px;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.2);
}

.social-icon {
    color: rgba(255, 255, 255, 0.5);
    font-size: 1.2rem;
    transition: 0.2s;
    text-decoration: none;
}

.social-icon:hover {
    color: white;
    transform: translateY(-3px);
}

.project-tab.active,
.about-tab.active,
.custom-tab.active {
    background: var(--white) !important;
    color: #1e293b !important;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.main-content {
    flex: 1;
    padding: 30px;
    overflow-y: auto;
    position: relative;
    color: var(--text-primary) !important;
    background: #fafafa;
    transition: background 0.4s ease, color 0.4s ease;
}

/* Series backgrounds reverted to white */
.series-20 .main-content,
.series-30 .main-content,
.series-40 .main-content {
    background: #fafafa;
}

.hidden {
    display: none !important;
}

/* Hot Sales Sidebar (Mobile) - Matching Cart Sidebar */
.hot-sales-sidebar {
    position: fixed;
    top: 0;
    right: -350px;
    width: 330px;
    height: 100%;
    background: #545454;
    box-shadow: -8px 0 32px rgba(0, 0, 0, 0.3);
    transition: right 0.4s cubic-bezier(0.25, 1, 0.5, 1);
    z-index: 1001;
    display: flex;
    flex-direction: column;
    border-left: 1px solid rgba(148, 163, 184, 0.1);
}

.hot-sales-sidebar.open {
    right: 0;
}

.section-title {
    font-size: 1.3rem;
    font-weight: 600;
    margin-bottom: 20px;
    color: var(--text-primary);
    border-left: 4px solid var(--accent);
    padding-left: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
}

/* Added for visibility on light theme */
.series-desc-container {
    color: var(--text-primary) !important;
    font-size: 0.95rem;
    margin-bottom: 20px;
    padding: 12px 16px;
    background: #f5f5f5;
    border-left: 3px solid var(--accent);
    border-radius: 0 8px 8px 0;
}

/* Ultra-strong override for series description */
#series-desc-container,
div.series-desc-container,
#aluminum-section .series-desc-container {
    color: #171717 !important;
}

#page-title {
    font-size: 2.8rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 10px 0;
    letter-spacing: -0.5px;
}

.divider {
    border: none;
    border-top: 1px solid var(--border);
    margin: 25px 0;
}

/* Force dark text for all views */
#view-product,
#view-projects,
#view-about,
#view-custom {
    color: var(--text-primary) !important;
}

#view-product *,
#view-projects *,
#view-about *,
#view-custom * {
    color: inherit;
}

/* Specific overrides for commonly white elements */
.project-row,
.project-info,
.case-title,
.case-desc,
.custom-container,
.custom-title,
.custom-desc {
    color: var(--text-primary) !important;
}

/* Ensure buttons and links maintain correct colors */
a,
button {
    color: inherit;
}

/* Prevent flicker during page load */
#aluminum-grid:empty::before,
#accessories-list:empty::before {
    content: '載入中...';
    display: block;
    text-align: center;
    padding: 40px;
    color: var(--text-secondary);
}

/* 1. 鋁材與專案列表 (4欄位) */
.aluminum-grid-container,
.projects-grid {
    display: grid;
    gap: 25px;
    grid-template-columns: repeat(4, 280px);
    /* 強制 4 欄 */
    justify-content: start;
    width: 100%;
}

.profile-card,
.project-card,
.acc-card {
    border: 1px solid var(--border);
    cursor: pointer;
    transition: all 0.2s ease;
    width: 280px;
    margin: 0;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    box-sizing: border-box;
    height: 100%;
    padding: 16px;
    overflow: hidden;
    position: relative;
    background: var(--surface);
    color: var(--text-primary);
    border-radius: 8px;
    box-shadow: var(--shadow-base);
}

.profile-card {
    /* Apply brushed metal texture with a light overlay for readability */
    background: linear-gradient(rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7)),
        url('assets/metal_texture.jpg') !important;
    background-size: cover !important;
    background-position: center !important;
    border: 1px solid #cbd5e1 !important;
    /* Slightly stronger border for metal look */
}

.profile-card b {
    color: #0f172a;
    /* Ensure name is sharp */
    font-size: 1.05rem;
}

/* Series-specific card backgrounds */
.series-20 .acc-card {
    background: var(--bg-20);
}

.series-30 .acc-card {
    background: var(--bg-30);
}

.series-40 .acc-card {
    background: var(--bg-40);
}

.profile-card:hover,
.project-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-hover);
    border-color: var(--accent);
}


.profile-card.selected {
    border-width: 2px !important;
    background: var(--surface);
    box-shadow: var(--shadow-active), var(--shadow-hover);
    transform: translateY(-4px);
}

.series-20 .profile-card.selected {
    border-color: #3b82f6 !important;
}

.series-30 .profile-card.selected {
    border-color: #f97316 !important;
}

.series-40 .profile-card.selected {
    border-color: #22c55e !important;
}

.profile-img,
.project-cover {
    width: 100%;
    aspect-ratio: 4 / 3;
    background: #fcfcfc;
    border-radius: 8px;
    /* 圖片圓角 */
    border: 1px solid #f0f0f0;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

.profile-img img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    transition: 0.3s;
    mix-blend-mode: multiply;
}

.profile-card:hover .profile-img img {
    /* No scale on hover or slight scale */
    transform: scale(1.05);
    mix-blend-mode: normal;
}

.profile-img img {
    background: transparent;
    mix-blend-mode: multiply;
}

.profile-card>div:not(.profile-img) {
    padding: 0;
}

.profile-card>small {
    padding: 0;
    display: block;
    margin-top: 5px;
}

.project-body {
    padding: 15px 0 0 0;
    text-align: center;
}

/* 2. 配件區塊 (4欄位) */
.accessories-container {
    display: grid;
    grid-template-columns: repeat(4, 280px);
    justify-content: start;
    gap: 25px;
    width: 100%;
    padding-bottom: 50px;
}

.acc-card {
    background: white;
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    border: 1px solid var(--border);
    width: 280px;
    height: 100%;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    box-sizing: border-box;
}

.acc-images {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
    width: 100%;
}

.acc-img-wrapper {
    width: 50%;
    aspect-ratio: 1 / 1;
    position: relative;
    background: #fcfcfc;
    border-radius: 8px;
    border: 1px solid #f0f0f0;
    cursor: zoom-in;
    overflow: hidden;
}

.acc-img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
}

.img-label {
    position: absolute;
    top: 5px;
    left: 5px;
    font-size: 0.8rem;
    background: var(--accent);
    color: var(--primary);
    padding: 3px 8px;
    border-radius: 4px;
    z-index: 10;
    font-weight: bold;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.acc-info {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 2px;
    /* Reduced from 10px */
    gap: 10px;
    min-height: 40px;
}

.acc-info>div:first-child {
    font-size: 0.85rem;
    font-weight: bold;
    line-height: 1.4;
    text-align: left;
    color: #333;
    flex: 1;
}

.acc-info>div:last-child {
    font-size: 1rem;
    white-space: nowrap;
    font-weight: bold;
    flex-shrink: 0;
    margin-top: 2px;
}

/* 3. 輸入框面板 (對齊4欄) */
.input-panel {
    background: white;
    color: var(--text-primary);
    padding: 20px;
    border-radius: 8px;
    margin-top: 25px;
    box-shadow: var(--shadow-base);
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: 16px;
    width: 100%;
    max-width: 1195px;
    box-sizing: border-box;
}

.input-top-row {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 25px;
    flex-wrap: wrap;
}

.selected-info {
    font-size: 1.15rem;
    font-weight: 600;
    color: var(--text-primary);
}

.highlight-text {
    color: var(--accent);
    font-weight: 700;
    font-size: 1.25rem;
    margin-left: 8px;
}

.series-20 .highlight-text {
    color: #3b82f6;
}

.series-30 .highlight-text {
    color: #f97316;
}

.series-40 .highlight-text {
    color: #22c55e;
}

/* ★★★ 重點修復區：強制定義輸入框與按鈕樣式 ★★★ */
/* 規格的輸入框與按鈕 */
.input-group {
    display: flex;
    gap: 10px;
    width: auto;
    align-items: center;
}

.input-group input {
    padding: 10px 14px;
    border: 1px solid var(--border);
    border-radius: 6px;
    width: 110px;
    background: white;
    color: var(--text-primary);
    font-size: 1rem;
    transition: all 0.2s;
}

#profile-len {
    width: 120px;
}

/* Wider for length */
#profile-qty {
    width: 60px;
}

/* Narrower for quantity */
.btn-add {
    background: var(--accent) !important;
    color: white !important;
    font-weight: 600;
    border: none;
    padding: 12px 24px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1rem;
    transition: all 0.2s ease;
    box-shadow: var(--shadow-base);
}

/* Series-specific Add Button Styles */
.series-20 .btn-add {
    background: var(--accent-20) !important;
    color: #171717 !important;
}

.series-30 .btn-add {
    background: var(--accent-30) !important;
    color: #171717 !important;
}

.series-40 .btn-add {
    background: var(--accent-40) !important;
    color: #171717 !important;
}

.btn-add:hover {
    background: var(--accent-hover) !important;
    transform: translateY(-1px);
    box-shadow: var(--shadow-hover);
}

.btn-add:active {
    transform: translateY(0);
}

/* 配件的輸入框 */
.acc-controls {
    display: flex;
    gap: 5px;
    margin-top: auto;
    width: 100%;
}

.acc-controls input {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--border) !important;
    border-radius: 6px;
    text-align: center;
    background: white;
    font-size: 1rem;
}

.acc-controls input:focus,
.input-group input:focus {
    border-color: var(--accent) !important;
    background: white;
    outline: none;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* 尺寸列表 */
.specs-list-container {
    width: 100%;
    margin-top: 5px;
    border-top: 1px dashed #eee;
    padding-top: 10px;
}

.spec-row {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    background: #f8f9fa;
    padding: 8px 15px;
    border-radius: 6px;
    margin-bottom: 8px;
    border: 1px solid #eee;
    animation: fadeIn 0.3s ease;
    gap: 40px;
}

.spec-row:hover {
    background: #f0f4f8;
}

.spec-info {
    display: flex;
    align-items: center;
    gap: 15px;
    font-weight: bold;
    color: #555;
}

.spec-edit input {
    width: 60px;
    padding: 5px;
    border: 1px solid #ddd;
    border-radius: 4px;
    text-align: center;
}

.spec-actions {
    display: flex;
    align-items: center;
    gap: 10px;
}

.btn-mini-del {
    background: none;
    border: none;
    color: #ff6b6b;
    cursor: pointer;
    font-size: 1.1rem;
}

.btn-mini-del:hover {
    color: #d63031;
    transform: scale(1.2);
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-5px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* 4. 購物車 UI */
.floating-cart-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: #545454;
    color: white;
    border: none;
    padding: 16px 28px;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    z-index: 900;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s ease;
}

.floating-cart-btn:hover {
    transform: translateY(-4px) scale(1.05);
    box-shadow: 0 12px 32px rgba(59, 130, 246, 0.45);
}

.cart-sidebar {
    position: fixed;
    top: 0;
    right: -350px;
    width: 330px;
    height: 100%;
    background: #545454;
    color: white !important;
    box-shadow: -8px 0 32px rgba(0, 0, 0, 0.3);
    transition: right 0.4s cubic-bezier(0.25, 1, 0.5, 1);
    z-index: 1000;
    display: flex;
    flex-direction: column;
    border-left: 1px solid rgba(148, 163, 184, 0.1);
}

.cart-sidebar.open {
    right: 0;
}

.cart-header {
    padding: 24px;
    background: rgba(30, 41, 59, 0.5);
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid rgba(148, 163, 184, 0.1);
}

.cart-title {
    font-size: 1.3rem;
    font-weight: 700;
    color: white;
    display: flex;
    align-items: center;
    gap: 8px;
}

.close-cart {
    cursor: pointer;
    font-size: 1.8rem;
    color: rgba(255, 255, 255, 0.6);
    transition: all 0.2s;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
}

.close-cart:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    transform: rotate(90deg);
}

.cart-scroll-wrapper {
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
}

.cart-body {
    flex: 0 0 auto;
    padding: 20px;
    background: transparent;
}

.cart-item {
    display: flex;
    align-items: center;
    background: rgba(30, 41, 59, 0.4);
    padding: 12px;
    border-radius: 12px;
    margin-bottom: 12px;
    border: 1px solid rgba(148, 163, 184, 0.15);
    box-shadow: var(--shadow-base);
    transition: all 0.2s;
}

.cart-item:hover {
    border-color: var(--accent-20);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
    transform: translateX(-2px);
}

.cart-item-img {
    width: 60px;
    height: 60px;
    border-radius: 8px;
    background: #f8fafc;
    border: 1px solid var(--border);
    object-fit: contain;
    margin-right: 15px;
    padding: 4px;
}

.cart-item-info {
    flex: 1;
}

.cart-item-title {
    font-size: 0.95rem;
    font-weight: 600;
    color: white;
    margin-bottom: 4px;
}

.cart-item-details {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.7);
    background: rgba(148, 163, 184, 0.15);
    padding: 3px 8px;
    border-radius: 6px;
    display: inline-block;
}

.cart-item-price {
    font-weight: 700;
    color: var(--accent-20);
    margin-top: 6px;
    font-size: 0.95rem;
}

.cart-item-actions {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 5px;
}

.cart-qty-badge {
    font-size: 0.85rem;
    color: var(--text-secondary);
    font-weight: 600;
    background: rgba(148, 163, 184, 0.15);
    padding: 4px 8px;
    border-radius: 6px;
}

.btn-remove {
    background: transparent;
    border: none;
    color: #ff6b6b;
    cursor: pointer;
    font-size: 1.2rem;
    padding: 5px;
    transition: 0.2s;
}

.btn-remove:hover {
    color: #e74c3c;
    transform: scale(1.1);
}

.cart-footer {
    padding: 24px;
    background: rgba(30, 41, 59, 0.5);
    border-top: 1px solid rgba(148, 163, 184, 0.1);
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.2);
}

.total-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 1.15rem;
    font-weight: 700;
    color: white;
    margin-bottom: 20px;
    padding: 12px;
    background: rgba(59, 130, 246, 0.1);
    border-radius: 10px;
}

#order-form {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

#order-form input,
#order-form textarea {
    width: 100%;
    padding: 12px;
    border: 1px solid rgba(148, 163, 184, 0.3);
    border-radius: 10px;
    font-size: 0.95rem;
    background: rgba(15, 23, 42, 0.4);
    color: white !important;
    box-sizing: border-box;
    transition: all 0.3s;
}

#order-form input:focus,
#order-form textarea:focus {
    background: rgba(59, 130, 246, 0.05);
    border-color: var(--accent-20);
    outline: none;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15);
}

.btn-submit {
    width: 100%;
    background: #3b82f6 !important;
    /* Force a bright blue */
    color: white !important;
    border: none;
    padding: 16px;
    border-radius: 12px;
    font-size: 1.2rem;
    font-weight: 800;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    margin-top: 12px;
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.5);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.btn-submit:hover {
    background: #2563eb !important;
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.6);
}

.btn-submit:active {
    transform: translateY(0) scale(0.98);
}

.lightbox {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
}

.lightbox.active {
    display: flex;
}

.lightbox img {
    max-width: 90%;
    max-height: 90%;
    border-radius: 5px;
}

.close-lightbox {
    position: absolute;
    top: 20px;
    right: 30px;
    color: white;
    font-size: 2rem;
    background: none;
    border: none;
    cursor: pointer;
}

.project-body {
    padding: 10px 0 0 0;
    text-align: center;
}

.step-viewer {
    display: none;
}

/* RWD */
@media (max-width: 1250px) {

    .aluminum-grid-container,
    .accessories-container {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    }

    .input-panel {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .app-container {
        flex-direction: column;
    }

    .sidebar {
        width: 100%;
        flex-direction: row;
        overflow-x: auto;
        padding: 10px;
        border-bottom: 1px solid var(--border);
        border-right: none;
        height: auto;
    }

    .nav-item {
        flex: 0 0 auto;
        width: auto;
        margin-right: 10px;
        margin-bottom: 0;
    }

    .cart-sidebar {
        width: 100%;
        right: -100%;
    }

    .accessories-container {
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        /* Smaller gap for mobile */
    }

    /* Force 2 columns for aluminum grid as well if not already */
    .aluminum-grid-container {
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
    }

    .acc-card {
        width: 100%;
    }

    .input-top-row {
        justify-content: space-between;
    }

    .input-group {
        width: 100%;
        justify-content: space-between;
        margin-top: 10px;
    }
}

.about-content {
    background: var(--primary);
    color: var(--white);
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
}

.about-content h3 {
    margin-top: 0;
    color: var(--white);
}

.about-content p {
    color: rgba(255, 255, 255, 0.9);
}

/* 5. 客製成品 (Custom Cases) & 專案範例 (Projects) Shared Layout */
.custom-cases-list,
.projects-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.series-desc-container {
    margin-bottom: 20px;
    color: var(--white);
    line-height: 1.6;
    font-size: 1.1rem;
    padding: 0 5px;
}

.profile-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
}

.custom-case-row,
.project-row {
    display: flex;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    border: 1px solid var(--border);
    gap: 25px;
    align-items: stretch;
}

/* Column 1: Info (Name, Desc, PDF) */
/* Column 1: Info (Name, Desc, PDF) */
/* Column 1: Info (Name, Desc, PDF) */
.case-info,
.project-info {
    flex: 0 0 25%;
    width: 25%;
    /* Explicit width to prevent shrinking */
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.case-title {
    font-size: 1.3rem;
    font-weight: bold;
    color: var(--primary);
    margin-bottom: 10px;
}

.case-desc {
    font-size: 1rem;
    color: #555;
    line-height: 1.6;
    margin-bottom: 20px;
    white-space: pre-line;
}

.btn-group {
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
    /* Center buttons horizontally */
    margin-top: auto;
    /* Push group to bottom */
}

.btn-pdf,
.btn-yt {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    /* Reduced gap */
    color: white;
    text-decoration: none;
    padding: 6px 16px;
    /* Smaller padding */
    border-radius: 50px;
    /* More rounded? or just keep 6px but smaller. User said "smaller". Let's keep radius 6px but small padding */
    border-radius: 6px;
    font-weight: bold;
    align-self: center;
    /* Center in flex container */
    transition: 0.2s;
    font-size: 0.85rem;
    /* Smaller font */
    width: auto;
    /* Not full width */
    min-width: 120px;
    /* Minimum width for consistency */
    justify-content: center;
    margin-top: auto;
    /* Push to bottom if in flex col */
}

.btn-pdf {
    background: #e74c3c;
}

.btn-pdf:hover {
    background: #c0392b;
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
}

.btn-yt {
    background: #c4302b;
}

/* YouTube Red */
.btn-yt:hover {
    background: #9e2622;
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(196, 48, 43, 0.3);
}

/* Column 2: Material Image */
/* Column 2: Material Image */
.case-material,
.project-scene {
    flex: 0 0 25%;
    width: 25%;
    /* Explicit width */
    display: flex;
    flex-direction: column;
    position: relative;
    /* For floating label */
}

.case-col-title {
    font-size: 0.9rem;
    font-weight: bold;
    color: #333;
    margin-bottom: 8px;
}

.material-img,
.scene-img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    background: #fdfdfd;
    border: 1px solid #eee;
    border-radius: 6px;
    cursor: zoom-in;
}

.scene-img {
    object-fit: cover;
}

/* Column 3: Collage (3 images) */
.case-collage {
    flex: 1;
    /* Take remaining space */
    display: flex;
    gap: 10px;
}

.collage-left {
    flex: 8;
    /* Geometric alignment: Width 8 -> Height 16 (2x squares) */
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.collage-right {
    flex: 9;
    /* Geometric alignment: Width 9 -> Height 16 (9:16 vertical) */
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.collage-item {
    display: flex;
    flex-direction: column;
    /* height: 100%; Removed to allow aspect-ratio to dictate height */
    overflow: hidden;
    width: 100%;
    /* Ensure width fills container */
}

/* Front & Side Views: 1:1 Square */
.collage-left .collage-item {
    aspect-ratio: 1 / 1;
    height: auto;
    /* Allow auto height based on width */
}

/* Common Floating Label Style */
.collage-label {
    font-size: 0.9rem;
    color: #666;
    margin-bottom: 0;
    /* No margin needed for absolute */
    font-weight: bold;
    text-align: left;
    position: absolute;
    z-index: 2;
    background: rgba(255, 255, 255, 0.8);
    padding: 3px 8px;
    border-radius: 4px;
    top: 10px;
    left: 10px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Wait, existing label was outside. If I make it absolute, it overlaps image.
   User just said "Lock 1:1". Usually this implies the *image* area is 1:1.
   If label is outside, the "item" component is 1:1 + label height.
   Let's keep label outside for now but ensure the IMAGE container is 1:1.
   Actually, applying aspect-ratio to the wrapper including label makes the image shorter.
   Better: Apply aspect-ratio to the IMAGE wrapper or the image itself?
   The user said "Image follows screen".
   I'll apply aspect-ratio to `.collage-img` (or its wrapper if I made one, but here img is direct child of item).
   Actually, `collage-item` contains label + img.
   Let's wrap the image in a div if needed, or just set aspect-ratio on img.
   But `collage-item` has `flex-direction: column`.
   If I set aspect-ratio on `collage-item`, the label takes space.
   I will set aspect-ratio on the **Image** element itself.
*/
/* Reset collage-item to be auto height */
.collage-item {
    display: flex;
    flex-direction: column;
    height: auto;
    overflow: hidden;
    position: relative;
}

/* Labels overlay or outside? Current design is outside.
   If I lock image to 1:1, the item height is 1:1 width + label height.
   This works.
*/
.collage-label {
    font-size: 0.9rem;
    color: #666;
    margin-bottom: 5px;
    font-weight: bold;
    text-align: left;
}

/* Front/Side Images: 1:1 */
.collage-left .collage-img {
    aspect-ratio: 1 / 1;
    width: 100%;
    object-fit: cover;
    height: auto;
    /* Let aspect ratio drive height */
}

/* Client Photo: 9:16 */
.collage-right .collage-img {
    aspect-ratio: 9 / 16;
    width: 100%;
    object-fit: cover;
    height: auto;
}

.collage-img {
    width: 100%;
    /* flex: 1; Removed flex to allow aspect-ratio */
    object-fit: cover;
    border-radius: 6px;
    border: 1px solid #eee;
    cursor: zoom-in;
    background: #f9f9f9;
}

/* === B2B Layout Fixes (2026/02/02 - Consolidated) === */
.b2b-content {
    display: flex;
    height: calc(100vh - 80px);
    gap: 20px;
    padding: 20px;
    overflow: hidden;
    background: #f1f2f6;
}

.b2b-product-panel {
    flex: 0.8;
    display: flex;
    flex-direction: column;
    height: 100%;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    overflow: hidden;
}

.b2b-product-list {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
}

/* 2. Middle: Hero Detail & Editor Area */
.b2b-detail-panel {
    flex: 3.7;
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
    gap: 15px;
    min-width: 0;
}

/* 3. Right: BOM Manifest & Analysis */
.b2b-analysis-panel {
    flex: 2;
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
    gap: 15px;
    min-width: 0;
}

/* Detail Card: Workspace filling the entire middle column */
.b2b-product-detail-card {
    background: white;
    border-radius: 12px;
    padding: 30px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
    display: flex;
    flex-direction: column;
    flex: 1;
    height: auto !important;
    min-height: 0;
    overflow-y: auto;
    border: 1px solid #eee;
    box-sizing: border-box;
    width: 100%;
}

.detail-input {
    box-sizing: border-box !important;
    /* Force box model */
}

/* Manifest List: Take remaining space and scroll */
.b2b-cart-list {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
    background: white;
    border-radius: 12px;
    padding: 15px;
    box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.05);
    border: 1px solid #eee;
}

/* Series Themed SKU Badges */
.sku-badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 700;
    font-family: 'Inter', sans-serif;
    letter-spacing: 0.5px;
    border: 1px solid transparent;
    text-transform: uppercase;
    vertical-align: middle;
    margin-right: 5px;
}

.sku-badge-20 {
    background: #eef6ff;
    color: #007bff;
    border-color: #bcd9ff;
}

.sku-badge-30 {
    background: #fff9eb;
    color: #d97706;
    border-color: #fde68a;
}

.sku-badge-40 {
    background: #ecfdf5;
    color: #059669;
    border-color: #a7f3d0;
}

.b2b-sub-item-row {
    font-size: 0.8rem;
    color: #555;
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 5px;
}

/* Detail Panel Refinement */
.b2b-detail-hero {
    display: flex;
    gap: 20px;
    align-items: center;
    padding-bottom: 20px;
    border-bottom: 1px solid #f1f2f6;
    max-width: 100%;
}

.b2b-detail-img-container {
    flex: 0 0 140px;
    background: #fff;
    border: 1px solid #eee;
    padding: 12px;
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);
}

.b2b-detail-info-main {
    flex: 1;
    min-width: 0;
    overflow: hidden;
}

.b2b-series-tag {
    display: inline-block;
    font-size: 0.7rem;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 2px 8px;
    border-radius: 4px;
    margin-bottom: 5px;
}

.series-20-tag {
    background: #e0f2fe;
    color: #0369a1;
}

.series-30-tag {
    background: #fef3c7;
    color: #b45309;
}

.series-40-tag {
    background: #dcfce7;
    color: #15803d;
}

/* Synchronize font size with left panel */
/* Enlarge Title and Tags */
.b2b-detail-info-main h2 {
    margin: 5px 0 10px 0;
    font-size: 1.25rem;
    /* Recalibrated Title Size */
    color: #2c3e50;
    line-height: 1.2;
    font-weight: 800;
}

.b2b-detail-price-box {
    margin-top: 8px;
    font-size: 1.05rem;
    /* Recalibrated Price Size */
    color: #e74c3c;
    font-weight: 700;
    display: flex;
    align-items: baseline;
    gap: 6px;
}

.b2b-input-card {
    background: #fff;
    border: 1px solid #eee;
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.02);
}

.detail-row-flex {
    display: flex;
    gap: 12px;
    margin-bottom: 12px;
    align-items: center;
    width: 100%;
    box-sizing: border-box;
}

.detail-row-flex input {
    height: 46px;
    /* Optimized Large Input */
    padding: 0 15px;
    border: 2px solid #e1e4e8;
    border-radius: 10px;
    font-size: 1.1rem;
    /* Clear but balanced font */
    font-weight: 600;
    transition: all 0.2s ease;
    background: #fdfdfd;
    box-sizing: border-box;
    min-width: 0;
}

.detail-row-flex input:focus {
    border-color: #007bff;
    outline: none;
    background: #fff;
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
}

.detail-row-flex .input-len {
    flex: 2 1 0;
    /* Grow:2, Shrink:1, Basis:0 */
}

.detail-row-flex .input-qty {
    flex: 1 1 0;
    /* Grow:1, Shrink:1, Basis:0 */
    text-align: center;
}

.b2b-detail-action-bar {
    background: #fff;
    padding: 15px 20px;
    border-radius: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1px solid #eee;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
    flex-wrap: nowrap;
    gap: 10px;
    margin-top: auto;
}

.b2b-manifest-header {
    flex-shrink: 0;
    padding: 15px 20px;
    background: white;
    border-radius: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.b2b-footer {
    flex-shrink: 0;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Analysis Summary Styling */
.analysis-item {
    text-align: center;
}

.analysis-label {
    font-size: 0.85rem;
    color: #666;
    margin-bottom: 5px;
}

.analysis-value {
    font-size: 1.5rem;
    font-weight: bold;
    color: #2c3e50;
}

/* === B2B Mode Visibility Control (Fix content bleeding) === */
body.mode-b2b .app-container,
body.mode-b2b .floating-cart-btn,
body.mode-b2b .top-banner,
body.mode-b2b #hub-overlay {
    display: none !important;
}

body.mode-b2b #b2b-dashboard {
    display: block !important;
    height: 100vh;
    background: #f1f2f6;
    /* Light gray bg for dashboard feel */
}

/* Note: Consolidated into main B2B section above */

/* Optional: Add a matching header to Right Panel for visual symmetry */
.b2b-manifest-header {
    background: white;
    padding: 15px 20px;
    border-radius: 8px;
    margin-bottom: 0;
    margin-top: 0;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

@media (max-width: 1100px) {

    .custom-case-row,
    .project-row {
        flex-direction: column;
    }

    .case-info,
    .project-info,
    .case-material,
    .project-scene,
    .case-collage,
    .project-visuals,
    .project-steps {
        flex: auto;
        width: 100%;
    }

    .case-collage {
        flex-direction: column;
        /* Stack vertically on tablet/zoomed desktop */
        height: auto;
        gap: 15px;
    }

    .collage-left {
        flex-direction: row;
        /* Keep front/side side-by-side inside the stack? 
           User said "Right half sort downwards".
           The collage itself is the right half.
           Inside the collage, we have 3 images.
           If we stack the collage container, do we stack the 2 inner blocks?
           Yes, standard stack is safer.
        */
        width: 100%;
    }

    .collage-left,
    .collage-right {
        width: 100%;
        height: auto;
    }

    .steps-grid {
        grid-template-columns: repeat(2, 1fr);
        height: auto;
    }
}

/* Move Mobile Vertical Stack Logic Here */
@media (max-width: 768px) {

    /* ... existing 768px rules ... */
    .case-collage {
        flex-direction: column;
        height: auto;
        gap: 15px;
    }

    .collage-left,
    .collage-right {
        width: 100%;
        height: auto;
    }

    .collage-left {
        flex-direction: column;
    }

    .collage-left .collage-item {
        height: 300px;
    }

    /* Ensure steps grid is auto height on mobile too */
    /* Ensure steps grid is auto height on mobile too */
    .steps-grid {
        grid-template-columns: repeat(2, 1fr);
        height: auto;
    }
}

/* New Project Layout specific styles (Teaching Mode) */
.project-scene.full-height {
    height: auto;
    /* Allow it to stretch */
}

.scene-img,
.scene-img-vertical {
    width: 100%;
    object-fit: contain;
    /* Default */
    border-radius: 6px;
    border: 1px solid #eee;
    cursor: zoom-in;
    background: #fdfdfd;
}

.scene-img-vertical {
    height: 100%;
    object-fit: cover;
    /* Fill the vertical space */
}

/* Old .project-visuals is deprecated in JS but cleared here just in case */
.project-visuals {
    display: none;
}

/* Project Steps Container */
.project-steps {
    flex: 1;
    display: flex;
    flex-direction: column;
    /* Ensure column layout */
    gap: 10px;
    height: 100%;
    position: relative;
    /* For floating label */
}

.info-complete-img {
    position: relative;
    /* For floating label */
    margin-top: 15px;
    /* Adjust spacing */
}

.step-item {
    position: relative;
    border: 1px solid #eee;
    border-radius: 6px;
    overflow: hidden;
}

.step-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    cursor: zoom-in;
}

.step-lbl {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0, 0, 0, 0.6);
    color: white;
    font-size: 0.8rem;
    padding: 4px;
    text-align: center;
}

.text-center {
    text-align: center;
}

.mb-2 {
    margin-bottom: 0.5rem;
}

/* Material Text Content Style */
.material-text-content {
    background: #fdfdfd;
    border: 1px solid #eee;
    border-radius: 6px;
    padding: 15px;
    /* Increase top padding if needed, but absolute label covers */
    padding-top: 40px;
    /* Make space for label */
    height: 100%;
    /* Fill container */
    overflow-y: auto;
    font-size: 0.95rem;
    line-height: 1.6;
    color: #555;
    white-space: pre-wrap;
    text-align: left;
}

/* Series Description Style */
.series-desc-container {
    background: #fdfdfd;
    border-left: 4px solid var(--accent);
    padding: 15px 20px;
    margin-bottom: 25px;
    border-radius: 4px;
    color: #555;
    line-height: 1.6;
    font-size: 1rem;
    white-space: pre-line;
    max-width: 1195px;
    /* Exact match with grid */
    width: 100%;
    /* Fill space */
}

/* 3-Part Quantity Control (New) */
.acc-controls {
    display: flex;
    width: 100%;
    align-items: center;
    margin-top: 5px;
    /* Closer to text */
    gap: 5px;
    border: none;
    border-radius: 0;
    overflow: visible;
}

/* Button & Input Flex Split */
.btn-qty,
.input-qty-no-arrow {
    flex: 1 1 0px;
    height: 28px;
    /* Slightly smaller */
    box-sizing: border-box;
    /* Crucial for equal height */
    padding: 0;
    /* Remove default padding */
    border: none;
    outline: none;
    font-size: 0.9rem;
    text-align: center;
    border-radius: 4px;
    line-height: normal;
    /* Reset line-height */
}

.btn-qty {
    /* Background handled by inline style */
    cursor: pointer;
    font-weight: bold;
    color: #555;
    transition: opacity 0.2s;
}

.btn-qty:hover {
    opacity: 0.8;
}

.btn-qty:active {
    opacity: 0.6;
}

.input-qty-no-arrow {
    background: #fff;
    border: 1px solid #ddd;
    /* Full border */
    color: #333;
}

/* Hide Spinners */
.input-qty-no-arrow::-webkit-outer-spin-button,
.input-qty-no-arrow::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.input-qty-no-arrow[type=number] {
    -moz-appearance: textfield;
    /* Firefox */
    appearance: textfield;
    /* Standard */
    -webkit-appearance: textfield;
    /* Chrome/Safari */
}

/* Selection Area Layout (2 Columns) */
.selection-wrapper {
    display: flex;
    gap: 20px;
    align-items: stretch;
    /* Equal height */
}

.selection-left {
    flex: 1;
    /* Takes majority of space */
    display: flex;
    flex-direction: column;
    /* justify-content: space-between; */
}

/* Height Visualization - Reset for Main Content */
.vis-container {
    display: flex;
    align-items: flex-end;
    justify-content: center;
    width: 250px;
    /* Fixed width for right column */
    /* Height will stretch via flex */
    background: #fdfdfd;
    border: 1px solid #eee;
    border-radius: 8px;
    padding: 10px;
    position: relative;
    gap: 20px;
    margin: 0;
    /* No external margins needed */
}

.vis-scale-labels {
    position: absolute;
    left: 10px;
    top: 10px;
    bottom: 10px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    font-size: 0.8rem;
    color: #ccc;
    padding: 5px 0;
    pointer-events: none;
}

.vis-human {
    height: 56%;
    /* 170cm / 300cm */
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    color: #95a5a6;
    z-index: 1;
}

.vis-human i {
    font-size: 5rem;
    line-height: 1;
}

.human-label {
    font-size: 0.8rem;
    margin-top: 5px;
    color: #999;
}

.vis-bar-wrapper {
    height: 100%;
    width: 40px;
    /* Thicker bar */
    display: flex;
    align-items: flex-end;
    position: relative;
    background: rgba(0, 0, 0, 0.03);
    border-radius: 4px;
}

/* Mobile Stack */
@media (max-width: 900px) {
    .selection-wrapper {
        flex-direction: column;
    }

    .vis-container {
        width: 100%;
        height: 250px;
        /* Fixed height when stacked */
    }
}

.vis-bar {
    width: 100%;
    height: 0%;
    background: var(--accent);
    /* Matches series color */
    border-radius: 4px;
    transition: height 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    position: relative;
}

.vis-val {
    position: absolute;
    top: -25px;
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: white;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.8rem;
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.3s;
}

.vis-bar-wrapper:hover .vis-val,
.vis-bar.active .vis-val {
    opacity: 1;
}

/* Responsive adjustment for input row */
@media (max-width: 768px) {
    .input-top-row {
        flex-direction: column;
        gap: 20px;
    }

    .vis-container {
        width: 100%;
        height: 200px;
        margin-left: 0;
    }
}

/* Series Color Themes */
body.series-20 {
    --accent: #BDE0F5;
    /* Blue */
}

body.series-30 {
    --accent: #F5C2A5;
    /* User: Pink Orange */
}

body.series-40 {
    --accent: #B7E0A1;
    /* User: Green */
}

/* =========================================
   Project Page Specific Overrides
   ========================================= */

/* 1. Scene Column: 9:16 Portrait Ratio */

.project-row .scene-img-vertical,
.project-row .project-scene iframe {
    aspect-ratio: 9 / 16 !important;
    width: 100%;
    height: auto !important;
    /* Allow height to scale by width */
    object-fit: cover;
}

/* 2. Steps Column: 1:1 Equal Grid */
/* Override the 8:9 flex split from Custom Cases */
.project-row .collage-left,
.project-row .collage-right {
    flex: 1 !important;
    /* Equal width columns */
}

/* Force all step images to be Square 1:1 */
.project-row .collage-img {
    aspect-ratio: 1 / 1 !important;
    object-fit: cover;
}

/* 3. Left Info Column Alignment */
.project-row .project-info {
    justify-content: flex-start;
    /* Stack from top */
    gap: 20px;
}

.project-row .info-complete-img {
    margin-top: auto;
    /* Push to bottom of info section if needed, or just flow naturally */
}

/* --- B2B SKU Badges --- */
.sku-badge-main {
    display: inline-block;
    background-color: #ebf5fb;
    /* Light Blue BG */
    color: #2980b9;
    font-weight: bold;
    font-size: 0.85rem;
    padding: 2px 8px;
    border-radius: 12px;
    border: 1px solid #aed6f1;
    margin-left: 8px;
    vertical-align: middle;
}

.sku-badge-sub {
    display: inline-block;
    background-color: #fef5e7;
    /* Light Orange BG */
    color: #e67e22;
    font-weight: bold;
    font-size: 0.8rem;
    padding: 1px 6px;
    border-radius: 4px;
    border: 1px solid #fad7a0;
    margin-right: 5px;
    vertical-align: middle;
}


/* --- B2B Dashboard Layout (Natural Scroll) --- */
.b2b-dashboard {
    /* Overlay effectively replaces body content */
    position: absolute;
    /* Changed from fixed to absolute so it scrolls with page */
    top: 0;
    left: 0;
    width: 100%;
    min-height: 100vh;
    background: #fdfdfd;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    /* Removed overflow: hidden so body can scroll */
}

.b2b-sidebar {
    display: none !important;
}

.b2b-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    width: 100%;
    /* Let content dictate height */
}

/* Sticky Header */
.b2b-header {
    background: white;
    border-bottom: 1px solid #ddd;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    /* Stronger shadow */
    padding: 15px 20px;
    position: sticky;
    top: 0;
    z-index: 1010;
    /* Above sidebar */
}

.b2b-content {
    display: flex;
    /* Side by side on desktop */
    align-items: flex-start;
    /* Important for sticky sidebar */
    padding: 20px;
    /* Add breathing room */
    gap: 20px;
    max-width: 1600px;
    margin: 0 auto;
    /* Center content on ultra-wide */
    width: 100%;
    box-sizing: border-box;
}

/* Left: Product Panel (Natural Growth) */
.b2b-product-panel {
    flex: 6;
    background: white;
    border: 1px solid #eee;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
    /* No overflow/height constraints -> grows with list */
}

.b2b-table-header {
    display: flex;
    padding: 12px 15px;
    background: #f8f9fa;
    border-bottom: 2px solid #ddd;
    color: #555;
    font-weight: bold;
    font-size: 0.9rem;
    position: sticky;
    /* Table header sticks inside panel? No, difficult with main scroll. Keep static or top 60px if needed. */
}

.b2b-product-list {
    /* Natural height */
    overflow: visible;
    padding-bottom: 20px;
}

/* Right: Analysis Panel (Sticky) */
.b2b-analysis-panel {
    flex: 4;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);

    /* STICKY MAGIC */
    position: sticky;
    top: 90px;
    /* Below fixed header */
    height: calc(100vh - 120px);
    /* Fit within viewport */
    overflow-y: auto;
    /* Internal scroll for cart/charts if needed */
    display: flex;
    flex-direction: column;
}

/* Series Tabs */
.b2b-tab-btn {
    padding: 8px 30px;
    border: 2px solid #ddd;
    background: white;
    font-size: 1rem;
    font-weight: bold;
    color: #777;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
}

.b2b-tab-btn:hover {
    background: #fdfdfd;
    transform: translateY(-1px);
}

.b2b-tab-btn[data-series="20"] {
    border-color: #aed6f1;
    color: #2980b9;
}

.b2b-tab-btn[data-series="20"].active {
    background: #3498db;
    color: white;
    border-color: #3498db;
    box-shadow: 0 4px 10px rgba(52, 152, 219, 0.4);
}

.b2b-tab-btn[data-series="30"] {
    border-color: #fad7a0;
    color: #d35400;
}

.b2b-tab-btn[data-series="30"].active {
    background: #e67e22;
    color: white;
    border-color: #e67e22;
    box-shadow: 0 4px 10px rgba(230, 126, 34, 0.4);
}

.b2b-tab-btn[data-series="40"] {
    border-color: #abebc6;
    color: #27ae60;
}

.b2b-tab-btn[data-series="40"].active {
    background: #27ae60;
    color: white;
    border-color: #27ae60;
    box-shadow: 0 4px 10px rgba(39, 174, 96, 0.4);
}

/* Columns */
.col-img {
    width: 50px;
    text-align: center;
}

.col-name {
    flex: 2;
    padding-left: 10px;
    min-width: 150px;
}

.col-price {
    width: 70px;
    text-align: right;
}

.col-input {
    width: 140px;
    text-align: center;
}

.col-action {
    width: 70px;
    text-align: center;
}

/* RWD: Mobile Stack */
@media (max-width: 900px) {
    .b2b-content {
        flex-direction: column;
        padding: 10px;
        gap: 15px;
    }

    .b2b-product-panel {
        width: 100%;
        border: none;
        box-shadow: none;
    }

    .b2b-analysis-panel {
        width: 100%;
        position: static;
        /* Unstick on mobile */
        height: auto;
        overflow: visible;
        order: 2;
        /* Put below products on pure stack? Or maybe utilize fixed bottom sheet? For now keep flow. */
    }

    .b2b-header {
        position: sticky;
        top: 0;
    }

    .col-img,
    .col-price {
        display: none;
    }

    .col-input {
        width: auto;
        flex: 1;
    }

    .b2b-tab-btn {
        padding: 8px 15px;
        font-size: 0.9rem;
    }
}

/* Ensure complete image is not too tall */
.project-row .info-complete-img img {
    aspect-ratio: 4 / 3;
    object-fit: cover;
}

/* FORCE OVERRIDE: Remove Series Description Card Style */
.series-desc-container {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 5px !important;
    color: var(--white) !important;
    font-size: 1.1rem !important;
    margin-bottom: 20px !important;
}

/* =========================================
   RWD (Mobile Responsive)
   Only affects screens smaller than 1000px
   Desktop view remains UNCHANGED.
   ========================================= */
@media (max-width: 1200px) {
    .app-container {
        flex-direction: column;
        height: auto;
        /* Allow scroll on mobile */
    }

    .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--border);
        flex-direction: column;
        /* Stack Brand and Nav */
        align-items: center;
        padding: 15px 10px;
        box-sizing: border-box;
        overflow-x: hidden;
        /* Prevent horizontal scroll */
        height: auto;
    }

    .sidebar .brand {
        margin-bottom: 15px;
        margin-right: 0;
        text-align: center;
        width: 100%;
    }

    .nav-tabs {
        display: grid !important;
        grid-template-columns: repeat(3, 1fr) !important;
        /* Force 3 columns */
        gap: 8px !important;
        width: 100% !important;
        padding: 0 5px !important;
        box-sizing: border-box !important;
        margin: 0 !important;
    }

    .nav-item {
        width: 100% !important;
        box-sizing: border-box !important;
        text-align: center !important;
        white-space: nowrap !important;
        margin-bottom: 0 !important;
        padding: 10px 4px !important;
        font-size: 0.85rem !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        border-radius: 8px !important;
    }

    .separator {
        display: none;
    }

    .social-links {
        display: none;
        /* Hide social on mobile top bar to save space */
    }

    .main-content {
        padding: 15px !important;
    }

    #page-title {
        font-size: 1.8rem !important;
        /* Smaller title on mobile */
        margin-bottom: 15px !important;
    }

    /* Grid becomes flexible - Single Column for Mobile */
    .aluminum-grid-container,
    .projects-grid,
    .accessories-container {
        grid-template-columns: 1fr;
        gap: 15px;
        justify-content: center;
    }

    /* Adjust Card Size for Mobile */
    .profile-card,
    .project-card,
    .acc-card {
        width: 100%;
        /* Fill the grid cell */
    }

    .input-panel {
        padding: 15px;
    }

    .input-top-row {
        flex-direction: column;
        align-items: flex-start;
    }

    /* Project Row Stack */
    .project-row,
    .custom-case-row {
        flex-direction: column;
    }


    .case-info,
    .project-info {
        width: 100%;
        flex: auto;
    }

    /* Hide Hot Sales on Mobile to prevent layout issues in top nav */
    #hot-sales-container {
        display: none !important;
    }
}

/* Hot Sales Sidebar (Compact) */
.hot-sales-title {
    font-size: 0.95rem;
    /* Smaller title */
    font-weight: bold;
    margin-bottom: 8px;
    /* Reduced margin */
    color: #ffd700;
    display: flex;
    align-items: center;
    gap: 8px;
}

.hot-item {
    display: flex;
    align-items: center;
    gap: 8px;
    /* Reduced gap */
    padding: 6px 8px;
    /* Reduced padding */
    border-radius: 6px;
    cursor: pointer;
    transition: 0.2s;
    margin-bottom: 3px;
    /* Reduced margin */
    background: rgba(255, 255, 255, 0.05);
}

.hot-item:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: translateX(5px);
}

.hot-rank {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    border-radius: 50%;
    font-size: 0.8rem;
    color: #333;
}

.rank-1 {
    background: #FFD700;
    box-shadow: 0 0 5px #ffd700;
}

/* Gold */
.rank-2 {
    background: #C0C0C0;
}

/* Silver */
.rank-3 {
    background: #CD7F32;
}

/* Bronze */

.hot-name {
    color: rgba(255, 255, 255, 0.9);
}

/* Highlight Effect for Hot Sales */
@keyframes highlightPulse {
    0% {
        transform: scale(1);
        border-color: transparent;
        box-shadow: 0 0 0 rgba(0, 0, 0, 0);
    }

    50% {
        transform: scale(1.05);
        border-color: #e74c3c;
        box-shadow: 0 0 20px rgba(231, 76, 60, 0.6);
    }

    100% {
        transform: scale(1);
        border-color: transparent;
        box-shadow: 0 0 0 rgba(0, 0, 0, 0);
    }
}

.highlight-effect {
    animation: highlightPulse 1.5s ease-in-out infinite;
    z-index: 10;
    position: relative;
    border: 2px solid #e74c3c !important;
    /* Visual confirmation */
}


/* =========================================
   Mobile Hot Sales Floating & Modal
   ========================================= */

/* Default Hidden on Desktop */
.floating-hot-btn {
    display: none;
}

/* Modal Overlay & Bottom Sheet */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 2000;
    display: flex;
    align-items: flex-end;
    /* Align bottom for sheet */
    opacity: 0;
    pointer-events: none;
    transition: 0.3s;
}

.modal-overlay.active {
    opacity: 1;
    pointer-events: auto;
}

.modal-bottom-sheet {
    width: 100%;
    background: #fff;
    border-radius: 20px 20px 0 0;
    padding: 20px;
    max-height: 80vh;
    overflow-y: auto;
    transform: translateY(100%);
    transition: 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
    box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.2);
    display: flex;
    flex-direction: column;
}

.modal-overlay.active .modal-bottom-sheet {
    transform: translateY(0);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    position: sticky;
    top: 0;
    background: #fff;
    z-index: 10;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
}

/* Mobile Floating Button Style (Matches Cart but Gold Pill) */
@media (max-width: 768px) {
    .floating-hot-btn {
        display: flex;
        /* Visible on Mobile */
        position: fixed;
        bottom: 90px;
        /* Above cart button */
        right: 30px;
        /* Aligned with cart button */
        background: linear-gradient(135deg, #FFD700 0%, #FDB931 100%);
        /* Golden Gradient */
        color: white;
        /* White Text */
        border: none;
        padding: 12px 20px;
        border-radius: 50px;
        /* Pill Shape (like Inquiry) */
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        z-index: 1900;
        font-weight: bold;
        align-items: center;
        font-size: 1rem;
        cursor: pointer;
        transition: 0.2s;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    .floating-hot-btn:active {
        transform: scale(0.95);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .floating-hot-btn i {
        color: white;
        margin-right: 8px;
    }
}

/* Rank Badge Overlay */
.rank-badge-overlay {
    position: absolute;
    top: 5px;
    right: 5px;
    padding: 3px 8px;
    color: white;
    font-size: 0.8rem;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    z-index: 20;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

/* Desktop Sidebar Hot Card */
.desktop-hot-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.desktop-hot-card {
    display: flex;
    align-items: center;
    background: rgba(255, 255, 255, 0.1);
    /* Semi-transparent white */
    border-radius: 8px;
    padding: 8px;
    cursor: pointer;
    transition: 0.2s;
    position: relative;
    overflow: hidden;
}

.desktop-hot-card:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateX(5px);
}

.desktop-hot-img {
    width: 40px;
    height: 40px;
    border-radius: 4px;
    background: #fff;
    object-fit: contain;
    margin-right: 10px;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.desktop-hot-name {
    font-size: 0.85rem;
    color: #fff;
    line-height: 1.2;
}

/* Reuse Rank Colors */
.rank-1 {
    background: linear-gradient(135deg, #FFD700, #FDB931);
}

/* Gold */
.rank-2 {
    background: linear-gradient(135deg, #C0C0C0, #E0E0E0);
}

/* Silver */
.rank-3 {
    background: linear-gradient(135deg, #CD7F32, #D2691E);
}

/* Bronze */

/* Mobile Hot Grid Layout */
.mobile-hot-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 20px;
}

/* Mobile Hot Card V2 */
.mobile-hot-card-v2 {
    background: #fff;
    border: 1px solid #eee;
    border-radius: 8px;
    padding: 10px;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.03);
    cursor: pointer;
    overflow: hidden;
}

.mobile-hot-card-v2:active {
    transform: scale(0.98);
    border-color: #ffd700;
}

.mobile-hot-rank-badge {
    position: absolute;
    top: 5px;
    left: 5px;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    color: #333;
    font-weight: bold;
    font-size: 0.8rem;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    /* Colors handled by .rank-N classes */
}

.mobile-hot-img {
    width: 100%;
    max-width: 100%;
    /* Force constraint */
    display: block;
    aspect-ratio: 1/1;
    object-fit: contain;
    margin-bottom: 8px;
    border-radius: 4px;
    background: #fdfdfd;
}

.mobile-hot-name-v2 {
    font-size: 0.9rem;
    font-weight: bold;
    color: #333;
    text-align: center;
    line-height: 1.3;
    margin-bottom: 4px;
    width: 100%;
}

.mobile-hot-series-v2 {
    font-size: 0.8rem;
    color: #999;
}

/* =========================================
   NEW Hot Sales Sidebar (Replaces Modal)
   ========================================= */

.hot-sales-sidebar {
    position: fixed;
    top: 0;
    right: -320px;
    width: 300px;
    height: 100%;
    background: white;
    box-shadow: -5px 0 25px rgba(0, 0, 0, 0.15);
    transition: 0.4s cubic-bezier(0.25, 1, 0.5, 1);
    z-index: 2000;
    display: flex;
    flex-direction: column;
}

.hot-sales-sidebar.open {
    right: 0;
}

@media (max-width: 768px) {
    .hot-sales-sidebar {
        width: 100%;
        right: -100%;
    }

    .hot-sales-sidebar.open {
        right: 0;
    }

    .floating-hot-btn {
        z-index: 1900;
        /* Ensure below sidebar */
    }
}

/* Model Badge in Selected List */
.model-badge {
    background: #fff;
    padding: 2px 8px;
    border-radius: 4px;
    font-weight: bold;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    margin-right: 8px;
    display: inline-block;
}

/* Force Case Description Alignment */
.case-desc {
    text-align: left !important;
    white-space: pre-wrap;
    line-height: 1.6;
}

/* =================================================
   新增樣式：系列描述、熱銷徽章、增強效果
   ================================================= */

/* 系列描述區塊樣式 */
.series-desc-container {
    background: rgba(30, 41, 59, 0.5);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(148, 163, 184, 0.2);
    border-radius: 12px;
    padding: 16px 20px;
    margin-bottom: 25px;
    color: var(--text-secondary);
    font-size: 1rem;
    line-height: 1.6;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

/* 熱銷排行徽章 - overlay 版本（卡片右上角） */
.rank-badge-overlay {
    position: absolute;
    top: -2px;
    right: -2px;
    padding: 6px 12px;
    border-radius: 0 16px 0 12px;
    font-size: 0.7rem;
    font-weight: 700;
    color: white;
    z-index: 10;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* 點擊高亮效果 */
@keyframes highlight-pulse {

    0%,
    100% {
        box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
        border-color: var(--accent-20);
    }

    50% {
        box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
        border-color: rgba(59, 130, 246, 0.5);
    }
}

.highlight-effect {
    animation: highlight-pulse 1.5s ease-in-out 2;
}

/* 系列動態配色（JavaScript動態添加class時生效）*/
body.series-20 {
    --accent: var(--accent-20);
}

body.series-30 {
    --accent: var(--accent-30);
}

body.series-40 {
    --accent: var(--accent-40);
}

/* 購物車計數徽章增強 */
#cart-count {
    background: #ef4444;
    color: white;
    font-size: 0.75rem;
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 12px;
    min-width: 20px;
    text-align: center;
    box-shadow: 0 2px 6px rgba(239, 68, 68, 0.4);
}

/* 全域滾動條美化 */
*::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

*::-webkit-scrollbar-track {
    background: transparent;
}

*::-webkit-scrollbar-thumb {
    background: rgba(148, 163, 184, 0.3);
    border-radius: 4px;
}

*::-webkit-scrollbar-thumb:hover {
    background: rgba(148, 163, 184, 0.5);
}

/* ========================================
   頂部橫幅輪播
   ======================================== */

.top-banner {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 48px;
    background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9998;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    transition: transform 0.3s ease, opacity 0.3s ease;
}

.top-banner.hidden {
    transform: translateY(-100%);
    opacity: 0;
    pointer-events: none;
}

.banner-content {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 0.9rem;
    animation: bannerSlide 0.5s ease-out;
}

@keyframes bannerSlide {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.banner-icon {
    font-size: 1.1rem;
    color: #fbbf24;
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {

    0%,
    100% {
        opacity: 1;
        transform: scale(1);
    }

    50% {
        opacity: 0.8;
        transform: scale(1.1);
    }
}

.banner-text {
    font-weight: 500;
    letter-spacing: 0.3px;
}

.banner-cta {
    margin-left: 8px;
    padding: 6px 16px;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 20px;
    color: white;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.85rem;
    transition: all 0.3s ease;
}

.banner-cta:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateX(3px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.banner-close {
    position: absolute;
    right: 16px;
    background: transparent;
    border: none;
    color: rgba(255, 255, 255, 0.8);
    cursor: pointer;
    padding: 8px;
    font-size: 1rem;
    transition: all 0.2s ease;
    border-radius: 4px;
}

.banner-close:hover {
    background: rgba(255, 255, 255, 0.15);
    color: white;
}

/* 進度指示器 */
.banner-indicators {
    position: absolute;
    left: 50%;
    bottom: 8px;
    transform: translateX(-50%);
    display: flex;
    gap: 8px;
    z-index: 1;
}

.indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.4);
    cursor: pointer;
    transition: all 0.3s ease;
}

.indicator:hover {
    background: rgba(255, 255, 255, 0.6);
    transform: scale(1.2);
}

.indicator.active {
    background: white;
    width: 24px;
    border-radius: 4px;
}

/* 當橫幅顯示時，調整主容器位置 */
body {
    padding-top: 48px;
    transition: padding-top 0.3s ease;
}

body.banner-hidden {
    padding-top: 0;
}

/* 響應式設計 */
@media (max-width: 768px) {
    .top-banner {
        height: 56px;
        padding: 0 50px 0 16px;
    }

    body {
        padding-top: 56px;
    }

    .banner-content {
        flex-direction: column;
        gap: 4px;
        font-size: 0.8rem;
        text-align: center;
    }

    .banner-text {
        line-height: 1.3;
    }

    .banner-cta {
        margin-left: 0;
        margin-top: 2px;
        padding: 4px 12px;
        font-size: 0.75rem;
    }
}

/* ========================================
   訂單提交載入動畫
   ======================================== */

.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(15, 23, 42, 0.98);
    backdrop-filter: blur(20px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 99999;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.4s ease;
}

.loading-overlay.active {
    opacity: 1;
    pointer-events: all;
}

.loading-content {
    text-align: center;
    max-width: 600px;
}

.loading-title {
    font-size: 2rem;
    margin-bottom: 40px;
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 700;
}

/* ========================================
   新版訂單動畫 (Clean Flexbox)
   ======================================== */
.process-animation {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    max-width: 500px;
    margin: 40px auto;
    gap: 0;
    /* 線條會自動填滿 */
}

.process-step {
    width: 100px;
    height: 100px;
    background: rgba(30, 41, 59, 0.9);
    border: 2px solid rgba(148, 163, 184, 0.3);
    border-radius: 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    opacity: 0.5;
    /* 未激活半透明 */
    transform: scale(0.9);
    transition: all 0.5s ease;
    flex-shrink: 0;
    position: relative;
    z-index: 10;
}

.process-step .icon {
    font-size: 2.5rem;
    margin-bottom: 5px;
}

.process-step .label {
    font-size: 0.9rem;
    color: #cbd5e1;
    font-weight: bold;
}

/* 激活狀態 */
.process-step.active {
    opacity: 1;
    transform: scale(1.1);
    background: rgba(30, 41, 59, 1);
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
    /* 默認藍光 */
    border-color: #3b82f6;
}

/* 步驟2 特殊色 */
#pStep2.active {
    box-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
    /* 綠光 */
    border-color: #10b981;
}

/* 連接線容器 */
.process-line {
    flex-grow: 1;
    height: 6px;
    background: #334155;
    margin: 0 -5px;
    /* 稍微重疊，確保無縫隙 */
    position: relative;
    z-index: 1;
    border-radius: 4px;
    overflow: hidden;
}

/* 內部填充線 */
.process-line-fill {
    width: 0%;
    height: 100%;
    background: linear-gradient(90deg, #3b82f6, #10b981);
    transition: width 2s linear;
    /* 線性動畫核心 */
}

/* 線條激活時填充 */
.process-line.active .process-line-fill {
    width: 100%;
}

.progress-text {
    font-size: 1.2rem;
    font-weight: bold;
    color: #e2e8f0;
    margin-top: 30px;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

/* 響應式調整 */
@media (max-width: 768px) {
    .line-2 {
        right: 60px;
    }
}

/* Page Header Layout for Check Order Button */
.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.page-header h2 {
    margin: 0;
}

/* Image Fix for Mobile: Ensure original aspect ratio */
@media (max-width: 1200px) {

    /* Project Scene Images */
    .scene-img-vertical {
        width: 100% !important;
        height: auto !important;
        object-fit: cover !important;
        /* 或者不設 object-fit，讓寬度決定高度 */
        max-height: none !important;
        /* 移除高度限制，讓它滿版 */
        min-height: 200px;
    }

    /* Custom Case Collage Images */
    .collage-img {
        width: 100% !important;
        height: auto !important;
        max-height: none !important;
        /* 移除高度限制 */
        object-fit: cover !important;
    }

    /* Reset container heights if necessary */
    .collage-item {
        height: auto !important;
        display: block !important;
    }
}

/* =========================================================================
   HUB OVERLAY & B2B PRO MODE STYLES
   ========================================================================= */

/* 1. Hub Overlay (Full Screen) */
.hub-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: #f0f2f5;
    z-index: 9999;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: opacity 0.5s ease;
}

.hub-overlay.hidden {
    opacity: 0;
    pointer-events: none;
}

.hub-container {
    text-align: center;
    max-width: 900px;
    width: 100%;
}

.hub-title {
    font-size: 2.5rem;
    color: #333;
    margin-bottom: 20px;
    font-weight: 700;
}

.hub-subtitle {
    font-size: 1.2rem;
    color: #666;
    margin-bottom: 40px;
}

.hub-cards {
    display: flex;
    gap: 30px;
    justify-content: center;
    flex-wrap: wrap;
}

.hub-card {
    background: white;
    width: 300px;
    padding: 40px 30px;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
    cursor: pointer;
    transition: all 0.3s ease;
    border: 3px solid transparent;
    position: relative;
    overflow: hidden;
    text-align: center;
}

.hub-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
}

/* Personal Card */
.hub-card:nth-child(1) {
    border-color: #e5e7eb;
}

.hub-card:nth-child(1):hover {
    border-color: #3b82f6;
}

/* Pro Card */
.hub-card.pro {
    border-color: #fce7f3;
    /* Subtle BG color hint */
}

.hub-card.pro:hover {
    border-color: #f59e0b;
}

.hub-icon {
    font-size: 3.5rem;
    margin-bottom: 25px;
    color: #4b5563;
}

.hub-card.personal .hub-icon {
    color: #3b82f6;
}

.hub-card.pro .hub-icon {
    color: #2c3e50;
}

.hub-card h3 {
    font-size: 1.5rem;
    margin-bottom: 15px;
    color: #1f2937;
    font-weight: 700;
}

.hub-card p {
    color: #6b7280;
    line-height: 1.6;
    margin-bottom: 30px;
    font-size: 0.95rem;
    min-height: 48px;
    /* Alignment */
}

.hub-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    background: #f3f4f6;
    color: #4b5563;
    border-radius: 50px;
    font-weight: 600;
    transition: all 0.2s;
}

.hub-card:hover .hub-btn {
    background: #1f2937;
    color: white;
}

.hub-card.pro:hover .hub-btn {
    background: #f59e0b;
    color: white;
}

.hub-tag {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #f59e0b;
    color: white;
    font-size: 0.8rem;
    font-weight: 800;
    padding: 4px 10px;
    border-radius: 4px;
    transform: rotate(10deg);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.hub-footer {
    margin-top: 50px;
}

.hub-footer a {
    color: #9ca3af;
    text-decoration: none;
    font-size: 0.95rem;
    transition: color 0.2s;
    border-bottom: 1px dashed transparent;
}

.hub-footer a:hover {
    color: #4b5563;
    border-color: #4b5563;
}


/* 2. B2B Analysis Panel (In Cart Sidebar) */
.analysis-panel {
    background: #2d3436;
    /* Dark Theme */
    color: #dfe6e9;
    border-radius: 8px;
    margin: 15px;
    padding: 15px;
    font-size: 0.9rem;
    position: relative;
    overflow: hidden;
    border-left: 4px solid #f59e0b;
    display: none;
    /* Hidden by default */
}

.analysis-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 8px;
}

.analysis-title {
    font-weight: bold;
    color: #f59e0b;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 1rem;
}

.analysis-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.analysis-item {
    background: rgba(255, 255, 255, 0.05);
    padding: 10px;
    border-radius: 6px;
    text-align: center;
}

.analysis-label {
    font-size: 0.75rem;
    color: #b2bec3;
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.analysis-value {
    font-size: 1.1rem;
    font-weight: bold;
    color: #fff;
    font-family: 'Roboto Mono', monospace;
}

.analysis-value small {
    font-size: 0.7rem;
    font-weight: normal;
    color: #aaa;
    margin-left: 2px;
}

/* Visualization Bar */
.theoretical-bar-container {
    margin-top: 15px;
}

.theoretical-label {
    font-size: 0.8rem;
    color: #dfe6e9;
    margin-bottom: 5px;
    display: flex;
    justify-content: space-between;
}

.theoretical-bar {
    background: #636e72;
    height: 10px;
    border-radius: 5px;
    overflow: hidden;
    display: flex;
}

.bar-segment {
    background: #00b894;
    height: 100%;
    border-right: 1px solid #2d3436;
    transition: width 0.3s ease;
}

.bar-segment.waste {
    background: #d63031;
}

.analysis-note {
    font-size: 0.75rem;
    color: #fdcb6e;
    margin-top: 10px;
    display: flex;
    align-items: top;
    gap: 6px;
    line-height: 1.4;
    background: rgba(253, 203, 110, 0.1);
    padding: 8px;
    border-radius: 4px;
}

/* User Mode Toggles */
/* If body has 'mode-b2b', show panel */
body.mode-b2b .analysis-panel {
    display: block !important;
}

/* =========================================================================
   B2B VISUAL IDENTITY
   ========================================================================= */

/* 1. Sidebar Change */
body.mode-b2b .sidebar {
    background: #2c3e50;
    /* Professional Dark Blue/Grey */
    border-right: 1px solid #34495e;
}

body.mode-b2b .brand::after {
    content: " PRO";
    font-size: 0.8rem;
    background: #f59e0b;
    color: white;
    padding: 2px 6px;
    border-radius: 4px;
    margin-left: 8px;
    vertical-align: middle;
}

/* 2. Header Indicator */
body.mode-b2b .page-header h2::after {
    content: "企業採購模式";
    font-size: 1rem;
    color: #f59e0b;
    border: 1px solid #f59e0b;
    padding: 4px 10px;
    border-radius: 50px;
    margin-left: 15px;
    vertical-align: middle;
    font-weight: normal;
}

/* 3. Global Accent Override for B2B */
body.mode-b2b {
    --accent: #f59e0b !important;
    /* Override Blue with Orange/Gold */
    --accent-hover: #d97706 !important;
}

/* 4. Button & Interaction adjustments */
body.mode-b2b .floating-cart-btn {
    background: #f59e0b;
    color: #fff;
    box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
}

body.mode-b2b .floating-cart-btn:hover {
    background: #d97706;
}

/* 5. Compact Card View for Pros (Less decoration, more data focus) */
body.mode-b2b .profile-card {
    border-radius: 4px;
    /* Sharper corners */
    border: 1px solid #ccc !important;
    background: #fff !important;
    /* Remove texture for clean look */
}

/* Step 2: Structure Analysis Chart Styles */
.structure-chart-container {
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px dashed rgba(255, 255, 255, 0.1);
}

.structure-label {
    display: flex;
    justify-content: space-between;
    font-size: 0.8rem;
    color: #dfe6e9;
    margin-bottom: 5px;
}

.structure-bar {
    display: flex;
    height: 12px;
    background: #444;
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 5px;
}

.structure-seg-al {
    background: #3b82f6;
    /* Blue for Aluminum */
}

.structure-seg-acc {
    background: #e74c3c;
    /* Red for Accessories */
}

.structure-legend {
    display: flex;
    gap: 10px;
    font-size: 0.7rem;
    color: #b2bec3;
    justify-content: flex-end;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 4px;
}

.dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    display: inline-block;
}

.health-alert {
    background: rgba(231, 76, 60, 0.2);
    border: 1px solid #e74c3c;
    color: #ff7675;
    padding: 8px;
    border-radius: 4px;
    margin-top: 10px;
    font-size: 0.8rem;
    display: flex;
    align-items: center;
    gap: 8px;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% {
        opacity: 1;
    }

    50% {
        opacity: 0.8;
    }

    100% {
        opacity: 1;
    }
}

.b2b-product-row {
    display: block;
    /* changed from flex to allow accordion to drop down */
    background: #fff;
    border-bottom: 1px solid #ecf0f1;
    padding: 10px;
    align-items: unset;
    /* remove flex alignment */
    transition: background 0.1s;
}

.b2b-product-row:hover {
    background: #fffef0;
    /* Subtle highlight */
}

.b2b-thumb {
    width: 50px;
    height: 50px;
    object-fit: contain;
    border-radius: 4px;
    border: 1px solid #eee;
}

.input-group-sm {
    display: flex;
    gap: 5px;
    justify-content: center;
}

.input-group-sm input {
    width: 70px;
    padding: 4px;
    border: 1px solid #dfe6e9;
    border-radius: 4px;
    text-align: center;
}

/* Hide standard scrollbars for cleaner look */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 4px;
}

#b2b-analysis-charts {
    padding: 15px;
    background: #fff;
    border-bottom: 2px solid #f1f2f6;
    border-top: 1px solid #eee;
    /* Light boundary when at top */
}

/* Specific styling for analysis items inside the narrower right panel */
#b2b-analysis-charts .analysis-item {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 10px;
}

#b2b-analysis-charts .analysis-value {
    font-size: 1.25rem !important;
}

#b2b-analysis-charts .analysis-label {
    font-size: 0.75rem !important;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.b2b-manifest-header {
    padding: 15px 20px;
    font-weight: bold;
    border-bottom: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #fff;
}

.b2b-cart-list {
    flex: 1;
    overflow-y: auto;
    padding: 0;
}

.b2b-cart-item {
    display: flex;
    padding: 10px 20px;
    border-bottom: 1px solid #f1f2f6;
    align-items: center;
    justify-content: space-between;
    font-size: 0.9rem;
}

.b2b-footer {
    padding: 20px;
    border-top: 1px solid #eee;
    background: #f8f9fa;
}

.b2b-total {
    font-size: 1.2rem;
    font-weight: bold;
    color: #2d3436;
    text-align: right;
    margin-bottom: 15px;
}

#b2b-total-price {
    color: #e74c3c !important;
}

.b2b-btn-submit {
    width: 100%;
    padding: 12px;
    background: #2c3e50;
    color: #fff;
    border: none;
    border-radius: 6px;
    font-size: 1rem;
    cursor: pointer;
    transition: background 0.2s;
}

.b2b-btn-submit:hover {
    background: #f59e0b;
}

.btn-xs {
    padding: 2px 8px;
    font-size: 0.75rem;
    border-radius: 4px;
    cursor: pointer;
}

.btn-outline {
    border: 1px solid #ccc;
    background: #fff;
}

.btn-add-b2b {
    background: #27ae60;
    color: white;
    border: none;
    width: 30px;
    height: 30px;
    border-radius: 4px;
    cursor: pointer;
}

.btn-add-b2b:hover {
    background: #2ecc71;
}

/* Hide standard scrollbars for cleaner look */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 4px;
}

/* Tree View Sidebar */
.b2b-tree-container {
    overflow-y: auto;
    flex: 1;
}

.b2b-tree-group {
    margin-bottom: 5px;
}

.b2b-tree-header {
    background: rgba(255, 255, 255, 0.05);
    padding: 10px 15px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 4px;
    color: #dfe6e9;
    font-size: 0.95rem;
    transition: background 0.2s;
}

.b2b-tree-header:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #f59e0b;
}

.b2b-tree-header.active {
    background: #2c3e50;
    color: #f59e0b;
    border-left: 3px solid #f59e0b;
}

.b2b-tree-header .arrow {
    font-size: 0.8rem;
    transition: transform 0.3s;
}

.b2b-tree-header.active .arrow {
    transform: rotate(90deg);
}

.b2b-tree-children {
    display: none;
    padding-left: 10px;
    margin-top: 5px;
}

.b2b-tree-children.open {
    display: block;
}

.b2b-tree-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    color: #bdc3c7;
    font-size: 0.9rem;
    cursor: pointer;
    border-radius: 4px;
    transition: all 0.1s;
    text-decoration: none;
}

.b2b-tree-item:hover {
    background: rgba(255, 255, 255, 0.05);
    color: #fff;
    padding-left: 15px;
    /* Slide effect */
}

.b2b-tree-item.selected {
    background: #f59e0b;
    color: #fff;
    font-weight: bold;
}

/* Focus Mode Panel (Main Center) */
.b2b-focus-panel {
    flex: 6;
    padding: 30px;
    background: #f1f2f6;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.focus-card {
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    width: 100%;
    max-width: 800px;
    padding: 30px;
    display: flex;
    gap: 30px;
}

.focus-img-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.focus-main-img {
    width: 100%;
    aspect-ratio: 1;
    object-fit: contain;
    border: 1px solid #eee;
    border-radius: 6px;
}

.focus-info {
    flex: 2;
    display: flex;
    flex-direction: column;
}

.focus-title {
    font-size: 1.8rem;
    font-weight: bold;
    color: #2d3436;
    margin-bottom: 5px;
}

.focus-meta {
    color: #b2bec3;
    font-size: 0.9rem;
    margin-bottom: 20px;
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
}

.focus-price-box {
    background: #f8f9fa;
    padding: 10px;
    border-radius: 6px;
    margin-bottom: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.focus-price {
    font-size: 1.5rem;
    color: #e74c3c;
    font-weight: bold;
}

/* Multi-row Input for Aluminum */
.focus-input-area {
    background: #fff;
    border: 1px solid #dfe6e9;
    border-radius: 6px;
    padding: 15px;
}

.focus-row {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
    align-items: center;
}

.focus-input {
    padding: 10px;
    border: 1px solid #dfe6e9;
    border-radius: 4px;
    flex: 1;
    font-size: 1rem;
}

.btn-add-focus {
    width: 100%;
    padding: 12px;
    background: #2c3e50;
    color: #fff;
    border: none;
    border-radius: 6px;
    font-size: 1.1rem;
    cursor: pointer;
    margin-top: 20px;
    transition: background 0.2s;
}

.btn-add-focus:hover {
    background: #34495e;
}

/* =========================================================================
   B2B SPLIT-SCREEN LAYOUT ENHANCEMENTS
   ========================================================================= */

/* Series-Specific Selection Highlights (Blue/Orange/Green) */
.b2b-product-row.b2b-series-20.active-row {
    background: linear-gradient(90deg, #e3f2fd 0%, #fff 100%) !important;
    border-left: 4px solid #3498db !important;
    box-shadow: 0 2px 8px rgba(52, 152, 219, 0.2);
}

.b2b-product-row.b2b-series-30.active-row {
    background: linear-gradient(90deg, #fff3e0 0%, #fff 100%) !important;
    border-left: 4px solid #e67e22 !important;
    box-shadow: 0 2px 8px rgba(230, 126, 34, 0.2);
}

.b2b-product-row.b2b-series-40.active-row {
    background: linear-gradient(90deg, #e8f5e9 0%, #fff 100%) !important;
    border-left: 4px solid #2ecc71 !important;
    box-shadow: 0 2px 8px rgba(46, 204, 113, 0.2);
}

/* Base transform for any active row */
.b2b-product-row.active-row {
    transform: translateX(2px);
}

/* Product Detail Card */
.b2b-product-detail-card {
    background: white;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    min-height: 220px;
}

.detail-placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 180px;
    color: #999;
    font-size: 1.1rem;
    flex-direction: column;
    gap: 10px;
}

/* Detail Grid Layout */
.detail-grid {
    display: grid;
    grid-template-columns: 200px 1fr;
    gap: 20px;
}

.detail-img {
    display: flex;
    align-items: center;
    justify-content: center;
}

.detail-img img {
    width: 100%;
    max-width: 180px;
    height: auto;
    object-fit: contain;
    border: 1px solid #eee;
    border-radius: 8px;
    padding: 10px;
    background: #fafafa;
}

.detail-info {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.detail-info h3 {
    font-size: 1.4rem;
    margin: 0;
    color: #2d3436;
    font-weight: 700;
}

.detail-meta {
    font-size: 0.9rem;
    color: #95a5a6;
    padding-bottom: 8px;
    border-bottom: 1px solid #ecf0f1;
}

.detail-price {
    font-size: 1.3rem;
    color: #e74c3c;
    font-weight: 700;
    padding: 8px 12px;
    background: #fff5f5;
    border-radius: 6px;
    display: inline-block;
    align-self: flex-start;
}

/* Detail Input Group */
.detail-input-group {
    margin-top: 10px;
}

.detail-input-group label {
    display: block;
    font-size: 0.9rem;
    color: #7f8c8d;
    margin-bottom: 6px;
    font-weight: 600;
}

.detail-row {
    display: flex;
    gap: 8px;
    margin-bottom: 8px;
    align-items: center;
}

.detail-input {
    padding: 8px 12px;
    border: 1px solid #dfe6e9;
    border-radius: 6px;
    font-size: 0.95rem;
    flex: 1;
    transition: border-color 0.2s;
}

.detail-input:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
}

.detail-input-lg {
    width: 120px;
    padding: 10px 14px;
    border: 1px solid #dfe6e9;
    border-radius: 6px;
    font-size: 1rem;
    text-align: center;
    font-weight: 600;
}

.detail-input-lg:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
}

/* Add Detail Button */
.btn-add-detail {
    width: 100%;
    padding: 12px 20px;
    background: #2c3e50;
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 1.05rem;
    font-weight: 600;
    cursor: pointer;
    margin-top: 15px;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.btn-add-detail:hover {
    background: #27ae60;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);
}

.btn-add-detail:active {
    transform: translateY(0);
}

/* Upload BOM Button (for later) */
.btn-upload-bom {
    padding: 10px 18px;
    background: #f59e0b;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.btn-upload-bom:hover {
    background: #d97706;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
}

/* Responsive adjustments */
@media (max-width: 1400px) {
    .detail-grid {
        grid-template-columns: 150px 1fr;
    }

    .detail-img img {
        max-width: 140px;
    }
}

@media (max-width: 1200px) {
    .detail-grid {
        grid-template-columns: 1fr;
    }

    .detail-img {
        justify-content: flex-start;
    }

    .detail-img img {
        max-width: 120px;
    }
}

/* === B2B Responsive Design (Prevent Sticking) === */
@media (max-width: 1200px) {
    .b2b-content {
        flex-direction: column;
        height: auto;
        overflow-y: visible;
        /* Let container scroll */
        padding-bottom: 50px;
    }

    body.mode-b2b #b2b-dashboard {
        height: auto;
        min-height: 100vh;
        overflow-y: auto;
    }

    .b2b-product-panel,
    .b2b-analysis-panel {
        flex: none;
        width: 100%;
        height: auto;
        min-height: 500px;
        /* Ensure space for list */
    }

    /* Left panel internal scroll limit */
    .b2b-product-list {
        min-height: 400px;
        max-height: 500px;
    }

    /* Right panel detail card should not lock height */
    .b2b-product-detail-card {
        max-height: none;
    }
}



#b2b-analysis-charts:empty {
    display: none;
}

/* =========================================================================
   MOBILE OPTIMIZATION (Max Width 768px)
   ========================================================================= */
@media (max-width: 768px) {

    /* --- 1. Top Header Optimization --- */
    .b2b-header-compact {
        flex-direction: column;
        align-items: stretch !important;
        gap: 15px !important;
        padding-bottom: 10px;
    }

    /* Tabs: Horizontal Scroll */
    .b2b-series-tabs {
        width: 100%;
        overflow-x: auto;
        white-space: nowrap;
        padding-bottom: 5px;
        /* Scrollbar spacing */
        -webkit-overflow-scrolling: touch;
        gap: 8px !important;
    }

    /* Hide Scrollbar but keep functionality */
    .b2b-series-tabs::-webkit-scrollbar {
        height: 4px;
    }

    .b2b-series-tabs::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.1);
        border-radius: 10px;
    }

    .b2b-tab-btn {
        flex: 0 0 auto;
        /* Don't shrink */
        padding: 10px 20px;
        font-size: 1rem;
    }

    /* Action Buttons: Grid Layout */
    .b2b-header-compact>div:last-child {
        display: grid !important;
        grid-template-columns: 1fr 1fr;
        gap: 8px !important;
        margin-left: 0 !important;
        width: 100%;
    }

    .b2b-header-compact>div:last-child button {
        width: 100%;
        justify-content: center;
        padding: 10px !important;
        font-size: 0.9rem !important;
    }

    /* --- 2. Main Layout Vertical Stack --- */
    .b2b-main {
        padding: 10px;
        height: auto !important;
        min-height: 100vh;
        overflow-y: auto;
    }

    .b2b-content {
        flex-direction: column;
        height: auto !important;
        gap: 15px;
    }

    /* --- Block 1: Product List (Scrollable Window) --- */
    .b2b-product-panel {
        width: 100%;
        height: auto;
        max-height: 400px;
        /* Limit height so users can scroll past it */
        display: flex;
        flex-direction: column;
        border: 1px solid #ccc;
        border-radius: 8px;
    }

    .b2b-product-list {
        flex: 1;
        overflow-y: auto;
        min-height: 250px;
    }

    /* --- Block 2: Detail View --- */
    .b2b-detail-panel {
        width: 100%;
        padding: 0;
        margin: 0;
        height: auto;
    }

    .b2b-product-detail-card {
        margin: 0;
        box-shadow: none;
        border: 1px solid #e0e0e0;
        min-height: auto;
    }

    .b2b-detail-img-container {
        height: 200px !important;
        /* Smaller image on mobile */
    }

    /* --- Block 3: Analysis & Cart --- */
    .b2b-analysis-panel {
        width: 100%;
        height: auto;
        border-top: 4px solid #f59e0b;
        margin-bottom: 50px;
        /* Space for footer/buttons */
    }

    .b2b-cart-list {
        max-height: 300px;
        /* Limit cart height */
    }

    /* --- General UI Polish --- */
    .b2b-product-row {
        padding: 15px 10px;
        /* Larger touch targets */
    }

    .col-img {
        flex: 0 0 50px !important;
    }

    .b2b-thumb {
        width: 50px !important;
        height: 50px !important;
    }

    .col-price {
        font-size: 0.85rem !important;
    }

    /* Make text readable */
    body {
        font-size: 16px;
    }
}

/* =========================================================================
   B2B MODE OVERRIDES (Hide Non-Pro Elements)
   ========================================================================= */
body.mode-b2b .floating-hot-btn,
body.mode-b2b .hot-sales-sidebar {
    display: none !important;
}

/* =========================================================================
   B2B FINAL GRID LAYOUT FIX (Step 18)
   ========================================================================= */

/* Desktop Layout (Default) */
.b2b-content {
    display: grid !important;
    grid-template-columns: 1fr 1fr 340px !important;
    /* Left & Middle Equal, Right Fixed */
    gap: 20px;
    height: calc(100vh - 100px);
    /* Fill screen minus header */
    overflow: hidden;
    /* Prevent body scroll */
    padding-bottom: 0;
}

/* 1. Left Panel: Product List */
.b2b-product-panel {
    height: 100%;
    overflow-y: hidden;
    /* Use child scroll */
    background: #fff;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
    display: flex;
    flex-direction: column;
}

.b2b-product-list {
    flex: 1;
    overflow-y: auto;
}

/* 2. Middle Panel: Intelligence Hub */
.b2b-detail-panel {
    height: 100%;
    overflow-y: auto;
    background: #fff;
    border-radius: 12px;
    border: 1px solid #e0e0e0;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.03);
    display: flex;
    flex-direction: column;
    padding: 0 !important;
    /* Reset padding to let children control it */
}

/* 3. Right Panel: Manifest (Cart) */
.b2b-analysis-panel {
    height: 100%;
    display: flex;
    flex-direction: column;
    background: #fff;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
    overflow: hidden;
}

.b2b-analysis-panel #b2b-cart-list {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
    height: auto !important;
    /* Override explicit heights */
    max-height: none !important;
}

.b2b-footer {
    padding: 15px;
    border-top: 1px solid #eee;
    background: #f8f9fa;
    flex-shrink: 0;
}

#b2b-analysis-charts {
    display: none !important;
    /* Force hide old charts in right panel */
}

/* Fix "Sticking Out" Issue */
body.mode-b2b {
    overflow: hidden;
    /* Prevent double scrollbars */
}

/* Responsive Overrides */
@media (max-width: 1200px) {
    .b2b-content {
        display: flex !important;
        flex-direction: column;
        height: auto;
        overflow-y: visible;
    }

    body.mode-b2b {
        overflow: auto;
    }

    .b2b-product-panel,
    .b2b-detail-panel,
    .b2b-analysis-panel {
        height: auto;
        min-height: 400px;
    }
}

/* =========================================================================
   UNIFIED RESPONSIVE OVERHAUL — 2026/02/20
   
   Strategy: ADDITIVE ONLY — zero changes to existing desktop rules above.
   These blocks override scattered earlier @media rules with higher-
   specificity selectors or later-source-order cascade wins.
   
   Breakpoints:
     1280px — Tablet Landscape / Small Desktop
     1024px — Tablet Portrait
      768px — Phone
   ========================================================================= */

/* ---- Hamburger Button (default hidden on desktop) ---- */
.mobile-hamburger {
    display: none;
    position: fixed;
    top: 12px;
    left: 12px;
    z-index: 1050;
    width: 44px;
    height: 44px;
    border: none;
    border-radius: 10px;
    background: #545454;
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
    transition: all 0.3s;
    align-items: center;
    justify-content: center;
}

.mobile-hamburger:active {
    transform: scale(0.92);
}

/* ---- Mobile Sidebar Overlay Backdrop ---- */
.sidebar-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1039;
    opacity: 0;
    transition: opacity 0.3s;
    pointer-events: none;
}

.sidebar-overlay.active {
    display: block;
    opacity: 1;
    pointer-events: auto;
}

/* ==========================================================
   1. TABLET LANDSCAPE / SMALL DESKTOP  (max-width: 1280px)
   ========================================================== */
@media (max-width: 1280px) {

    /* B2C: 3 columns instead of 4 */
    .aluminum-grid-container,
    .accessories-container {
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 18px !important;
    }

    .profile-card,
    .acc-card {
        width: 100% !important;
    }

    /* Sidebar slightly narrower */
    .sidebar {
        width: 210px;
    }

    /* Input panel fit */
    .input-panel {
        max-width: 100%;
    }
}

/* ==========================================================
   2. TABLET PORTRAIT  (max-width: 1024px)
   ========================================================== */
@media (max-width: 1024px) {

    /* ---- B2C Sidebar → Hamburger Overlay ---- */
    .mobile-hamburger {
        display: flex !important;
    }

    .sidebar {
        position: fixed !important;
        top: 0 !important;
        left: -280px !important;
        width: 260px !important;
        height: 100vh !important;
        z-index: 1040 !important;
        flex-direction: column !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        transition: left 0.35s cubic-bezier(0.25, 1, 0.5, 1) !important;
        border-right: 1px solid rgba(255, 255, 255, 0.1) !important;
        border-bottom: none !important;
        padding: 24px 16px !important;
        box-shadow: 4px 0 24px rgba(0, 0, 0, 0.2) !important;
    }

    .sidebar.mobile-open {
        left: 0 !important;
    }

    /* Restore vertical sidebar styles that 1200px breakpoint may have overridden */
    .sidebar .brand {
        margin-bottom: 20px;
        text-align: left;
        width: 100%;
    }

    .nav-tabs {
        display: flex !important;
        flex-direction: column !important;
        gap: 4px !important;
        width: 100% !important;
        padding: 0 !important;
    }

    .nav-item {
        width: 100% !important;
        text-align: left !important;
        padding: 12px 14px !important;
        font-size: 0.95rem !important;
        justify-content: flex-start !important;
        border-radius: 8px !important;
        margin-bottom: 0 !important;
        white-space: normal !important;
    }

    .separator {
        display: block !important;
        height: 1px !important;
        background: rgba(255, 255, 255, 0.1) !important;
        margin: 10px 0 !important;
    }

    .social-links {
        display: flex !important;
    }

    /* App container: remove sidebar space */
    .app-container {
        flex-direction: column !important;
        height: auto !important;
    }

    .main-content {
        padding: 20px !important;
        padding-top: 60px !important;
    }

    /* B2C Grid: 2 columns */
    .aluminum-grid-container,
    .accessories-container {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 15px !important;
    }

    .profile-card,
    .acc-card {
        width: 100% !important;
    }

    /* Page title smaller */
    #page-title {
        font-size: 2rem !important;
    }

    /* Input panel stacks */
    .input-top-row {
        flex-direction: column !important;
        align-items: stretch !important;
        gap: 12px !important;
    }

    .input-group {
        width: 100% !important;
        flex-wrap: wrap !important;
    }

    .input-group input {
        flex: 1 !important;
        min-width: 80px !important;
    }

    /* Floating cart button */
    .floating-cart-btn {
        bottom: 20px !important;
        right: 20px !important;
        padding: 14px 20px !important;
    }

    /* Project/Case rows stack vertically */
    .project-row,
    .custom-case-row {
        flex-direction: column !important;
    }

    .case-info,
    .project-info,
    .case-material,
    .project-scene,
    .case-collage,
    .project-steps {
        flex: auto !important;
        width: 100% !important;
    }

    /* B2B Header: wrap on tablet */
    .b2b-header-compact {
        flex-wrap: wrap !important;
        gap: 10px !important;
    }

    .b2b-series-tabs {
        order: 2;
        width: 100%;
    }

    .b2b-tab-btn {
        flex: 1;
        text-align: center;
    }

    /* B2B Content stacks */
    .b2b-content {
        flex-direction: column !important;
        height: auto !important;
        overflow-y: visible !important;
    }

    .b2b-product-panel,
    .b2b-detail-panel,
    .b2b-analysis-panel {
        height: auto !important;
        min-height: auto !important;
        width: 100% !important;
    }

    .b2b-analysis-panel {
        position: static !important;
        overflow: visible !important;
    }

    body.mode-b2b {
        overflow: auto !important;
    }

    /* Hot sales hidden in sidebar on tablet (shown via sidebar overlay) */
    #hot-sales-container {
        display: block !important;
    }
}

/* ==========================================================
   3. PHONE  (max-width: 768px)
   ========================================================== */
@media (max-width: 768px) {

    /* ---- Hamburger adjustments ---- */
    .mobile-hamburger {
        top: 8px;
        left: 8px;
        width: 40px;
        height: 40px;
        font-size: 1.1rem;
    }

    /* ---- Main content full-screen ---- */
    .main-content {
        padding: 12px !important;
        padding-top: 56px !important;
    }

    /* ---- Single Column Grid ---- */
    .aluminum-grid-container,
    .accessories-container,
    .projects-grid {
        grid-template-columns: 1fr !important;
        gap: 12px !important;
    }

    /* Page title compact */
    #page-title {
        font-size: 1.5rem !important;
        margin-bottom: 10px !important;
    }

    /* Section titles smaller */
    .section-title {
        font-size: 1.1rem !important;
        margin-bottom: 12px !important;
    }

    /* Input panel: touch-friendly */
    .input-panel {
        padding: 12px !important;
    }

    .input-group {
        flex-direction: column !important;
        gap: 8px !important;
    }

    .input-group input {
        width: 100% !important;
        min-width: unset !important;
        padding: 12px 14px !important;
        font-size: 1rem !important;
    }

    #profile-len,
    #profile-qty {
        width: 100% !important;
    }

    .btn-add {
        width: 100% !important;
        padding: 14px !important;
        font-size: 1.05rem !important;
        border-radius: 10px !important;
    }

    /* Cart sidebar: full width */
    .cart-sidebar {
        width: 100% !important;
        right: -100% !important;
    }

    .cart-sidebar.open {
        right: 0 !important;
    }

    /* Floating buttons: centered bottom bar feel */
    .floating-cart-btn {
        bottom: 16px !important;
        right: 16px !important;
        left: auto !important;
        padding: 12px 20px !important;
        font-size: 1rem !important;
        border-radius: 50px !important;
    }

    .floating-hot-btn {
        bottom: 72px !important;
        right: 16px !important;
        padding: 10px 16px !important;
        font-size: 0.9rem !important;
    }

    /* Spec rows: touch-friendly */
    .spec-row {
        padding: 10px 12px !important;
        gap: 10px !important;
        flex-wrap: wrap !important;
    }

    .spec-info {
        font-size: 0.9rem !important;
    }

    /* Accessory card: larger touch targets */
    .acc-controls {
        gap: 8px !important;
    }

    .btn-qty,
    .input-qty-no-arrow {
        height: 36px !important;
        font-size: 1rem !important;
    }

    /* Project/Custom case image containers */
    .collage-left {
        flex-direction: column !important;
    }

    .collage-left .collage-item {
        height: auto !important;
    }

    /* B2B specific phone header cleanup */
    .b2b-header-compact {
        display: flex !important;
        flex-direction: column !important;
        gap: 12px !important;
        width: 100% !important;
    }

    /* Row 1: Title + Exit Button */
    .b2b-header-compact>h2 {
        display: flex !important;
        justify-content: space-between !important;
        width: 100% !important;
        font-size: 1.3rem !important;
        align-items: center !important;
    }

    /* Move Exit button to be next to title visually via order or absolute, 
       but here we can just use flex order if we change HTML structure? 
       Actually, let's just make the container wrap naturally but force line breaks.
    */

    /* Better Strategy: Grid Layout for Header */
    .b2b-header-compact {
        display: grid !important;
        grid-template-columns: 1fr auto !important;
        grid-template-areas:
            "title exit"
            "tabs tabs"
            "search search"
            "actions actions";
        gap: 10px !important;
    }

    .b2b-header-compact>h2 {
        grid-area: title;
    }

    /* We need to target the Exit button specifically. 
       Currently it's inside the "Right Actions" div.
       Let's style the "Right Actions" div to unwrap contents into our grid?
       The structure is: H2, Div(Series), Div(Actions [Search, Import, Template, Query, Exit])
       This HTML structure is hard to grid without changing HTML.
       
       Let's stick to Flex Column for the main container, and reorganize children.
    */
    .b2b-header-compact {
        display: flex !important;
        flex-direction: column !important;
    }

    /* 1. Title Row */
    .b2b-header-compact>h2 {
        width: 100%;
        margin-bottom: 5px !important;
    }

    /* 2. Series Tabs Row */
    .b2b-series-tabs {
        width: 100% !important;
        order: 2 !important;
        display: flex !important;
        gap: 8px !important;
    }

    .b2b-tab-btn {
        flex: 1 !important;
        text-align: center !important;
        padding: 8px 0 !important;
    }

    /* 3. Action Group Container (Search + Buttons) */
    /* 3. Action Group Container (Unified Grid Alignment) */
    .b2b-action-group {
        width: 100% !important;
        order: 3 !important;
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 8px !important;
        margin-left: 0 !important;
        margin-top: 5px !important;
    }

    /* Common styles for all 4 boxes to ensure perfect sync */
    .b2b-search-box,
    .b2b-action-group .btn-xs,
    .btn-query {
        height: 42px !important;
        margin: 0 !important;
        border-radius: 6px !important;
        border: 1px solid #ccc !important;
        box-sizing: border-box !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        font-size: 0.85rem !important;
        min-width: 0 !important;
        padding: 0 8px !important;
        box-shadow: none !important;
    }

    /* Row 1, Col 1: Search */
    .b2b-search-box {
        grid-column: 1;
        grid-row: 1;
        position: relative !important;
        background: #fff !important;
        padding: 0 !important;
    }

    .b2b-search-box input {
        width: 100% !important;
        height: 100% !important;
        border: none !important;
        background: transparent !important;
        padding: 0 8px 0 32px !important;
        font-size: 0.85rem !important;
        outline: none !important;
    }

    .b2b-search-box i {
        position: absolute !important;
        left: 10px !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
        color: #999 !important;
        pointer-events: none !important;
    }

    /* Row 1, Col 2: Query */
    .btn-query {
        grid-column: 2;
        grid-row: 1;
        background: #545454 !important;
        color: white !important;
        border-color: #545454 !important;
        white-space: nowrap !important;
    }

    /* Row 2, Col 1: Import */
    .b2b-action-group .btn-xs:nth-of-type(1) {
        grid-column: 1;
        grid-row: 2;
        color: #2980b9 !important;
        border-color: #2980b9 !important;
        background: white !important;
    }

    /* Row 2, Col 2: Template */
    .b2b-action-group .btn-xs:nth-of-type(2) {
        grid-column: 2;
        grid-row: 2;
        color: #27ae60 !important;
        border-color: #27ae60 !important;
        background: white !important;
    }


    /* B2B columns hide on small */
    /* Restore Image! User wants it. */
    .col-img {
        display: block !important;
        width: 60px !important;
        flex: 0 0 60px !important;
        height: 60px !important;
        margin-right: 10px !important;
    }

    .col-img img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        border: 1px solid #eee;
        border-radius: 4px;
        background: #fff;
    }

    /* B2B List Item: Card Layout for Mobile (Final Polish) */
    .b2b-list-item {
        display: flex !important;
        flex-wrap: wrap !important;
        padding: 12px !important;
        align-items: flex-start !important;
        position: relative !important;
        border-bottom: 1px solid #eee !important;
    }

    /* 1. Image: Top Left fixed */
    .col-img {
        flex: 0 0 60px !important;
        width: 60px !important;
        height: 60px !important;
        margin-right: 12px !important;
        margin-bottom: auto !important;
        /* Stay at top */
    }

    /* 2. Top Section: Name & Specs */
    .col-name {
        flex: 1 1 auto !important;
        width: auto !important;
        min-width: 0 !important;
        display: flex !important;
        flex-direction: column !important;
        /* Force vertical stack */
        align-items: flex-start !important;
        margin-bottom: 8px !important;
        padding-right: 4px !important;
    }

    /* Name Title Style */
    .col-name-title {
        font-size: 1rem !important;
        font-weight: bold !important;
        line-height: 1.3 !important;
        color: #333 !important;
        margin-bottom: 4px !important;
    }

    /* Hide redundant BRs in flex column mode */
    .col-name br {
        display: none !important;
    }

    /* Specs Container */
    .sku-badge {
        white-space: nowrap !important;
        display: block !important;
        /* Occupy independent line */
        width: fit-content !important;
        margin-bottom: 4px !important;
        margin-top: 2px !important;
    }

    /* Force Accessory Rows to new lines & internal vertical stack */
    .b2b-sub-item-row {
        display: flex !important;
        flex-direction: column !important;
        align-items: flex-start !important;
        width: 100% !important;
        margin-top: 4px !important;
        font-size: 0.9rem !important;
        color: #666 !important;
    }

    /* Hide series index header on mobile - redundant with tabs */
    .b2b-series-index-header {
        display: none !important;
    }

    .col-name span,
    .col-name div,
    .col-name small {
        display: block !important;
        /* Stack weights and other info */
        white-space: normal !important;
        word-break: break-word !important;
        font-weight: normal !important;
        font-size: 0.9rem !important;
        color: #666 !important;
        line-height: 1.4 !important;
        margin-bottom: 2px !important;
    }

    /* ... name styles ... */

    /* 3. Price: Right aligned, auto width */
    .col-price {
        flex: 0 0 auto !important;
        /* Only take needed space */
        width: auto !important;
        text-align: right !important;
        margin-left: auto !important;
        /* Push to right if wrapping */
        display: flex !important;
        flex-direction: column !important;
        align-items: flex-end !important;
        justify-content: flex-start !important;
    }

    .col-input {
        order: 4 !important;
        width: 110px !important;
        flex: 0 0 110px !important;
        margin-left: auto !important;
        /* Push to right */
    }

    .col-input input {
        width: 100% !important;
        padding: 8px !important;
        text-align: center !important;
        font-size: 1rem !important;
        border: 1px solid #ddd !important;
        border-radius: 6px !important;
    }

    /* Hide Action Button */
    .col-action {
        display: none !important;
    }

    /* B2B Detail hero stack */
    .b2b-detail-hero {
        flex-direction: column !important;
        align-items: flex-start !important;
    }

    .b2b-detail-img-container {
        flex: none !important;
        width: 100% !important;
        max-width: 200px !important;
    }

    .detail-row-flex {
        flex-direction: column !important;
        gap: 8px !important;
    }

    .detail-row-flex input {
        width: 100% !important;
    }

    /* Hub cards stack on phone */
    .hub-cards {
        flex-direction: column !important;
        align-items: center !important;
    }

    .hub-card {
        width: 100% !important;
        max-width: 340px !important;
    }

    .hub-title {
        font-size: 1.8rem !important;
    }

    .hub-subtitle {
        font-size: 1rem !important;
    }

    /* Top banner: adjust spacing for hamburger */
    .top-banner {
        padding-left: 60px !important;
    }

    /* Order query modal */
    .modal-content {
        width: 95% !important;
    }

    /* Selection wrapper for height vis */
    .selection-wrapper {
        flex-direction: column !important;
    }

    .vis-container {
        width: 100% !important;
        height: 200px !important;
    }

    /* Loading animation responsive */
    .process-step {
        width: 80px !important;
        height: 80px !important;
    }

    .process-step .icon {
        font-size: 2rem !important;
    }

    .process-step .label {
        font-size: 0.75rem !important;
    }

    /* Page header stack */
    .page-header {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 10px !important;
    }

    /* B2B Actions wrap better */
    .desktop-only {
        display: none !important;
    }
}